<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiberOptics Academy | Complete Learning Platform</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”Œ</text></svg>">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ====== CSS VARIABLES ====== */
        :root {
            /* Dark Theme */
            --bg-primary: #0a0a0f;
            --bg-secondary: #15151e;
            --bg-tertiary: #1e1e2d;
            --bg-card: #252535;
            --bg-hover: #2d2d42;
            
            /* Accent Colors */
            --accent-primary: #00d9ff;
            --accent-secondary: #7b61ff;
            --accent-success: #00ff9d;
            --accent-warning: #ffcc00;
            --accent-danger: #ff4757;
            --accent-info: #2eccff;
            
            /* Text Colors */
            --text-primary: #ffffff;
            --text-secondary: #b0b0c0;
            --text-muted: #8888a0;
            --text-code: #00ff9d;
            
            /* Border Colors */
            --border-light: rgba(255, 255, 255, 0.1);
            --border-medium: rgba(255, 255, 255, 0.15);
            --border-heavy: rgba(255, 255, 255, 0.2);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            --gradient-dark: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            --gradient-card: linear-gradient(145deg, var(--bg-card), var(--bg-tertiary));
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px rgba(0, 217, 255, 0.3);
            
            /* Border Radius */
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Transitions */
            --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Spacing */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
        }

        /* ====== BASE STYLES ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0, 217, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(123, 97, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(0, 255, 157, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* RTL Support */
        body[dir="rtl"] {
            text-align: right;
        }

        body[dir="rtl"] .sidebar {
            right: 0;
            left: auto;
            transform: translateX(100%);
        }

        body[dir="rtl"] .sidebar.active {
            transform: translateX(0);
        }

        /* ====== TYPOGRAPHY ====== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: var(--spacing-sm);
        }

        h1 {
            font-size: 2.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            font-size: 2rem;
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.5rem;
            color: var(--accent-primary);
        }

        p {
            margin-bottom: var(--spacing-sm);
            color: var(--text-secondary);
        }

        .text-gradient {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .text-muted {
            color: var(--text-muted);
        }

        .text-success {
            color: var(--accent-success);
        }

        .text-warning {
            color: var(--accent-warning);
        }

        .text-danger {
            color: var(--accent-danger);
        }

        /* ====== LAYOUT ====== */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* ====== SIDEBAR ====== */
        .sidebar {
            width: 280px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-light);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform var(--transition-normal);
            transform: translateX(0);
        }

        .sidebar-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            padding: var(--spacing-md) 0;
        }

        .nav-section {
            margin-bottom: var(--spacing-lg);
        }

        .nav-section-title {
            padding: 0 var(--spacing-lg) var(--spacing-xs);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            font-weight: 600;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: var(--bg-hover);
        }

        .nav-item.active {
            background: rgba(0, 217, 255, 0.1);
            border-left-color: var(--accent-primary);
        }

        .nav-icon {
            width: 20px;
            text-align: center;
            color: var(--accent-primary);
        }

        .nav-text {
            flex: 1;
            font-weight: 500;
        }

        .nav-badge {
            background: var(--accent-primary);
            color: var(--bg-primary);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        /* ====== MAIN CONTENT ====== */
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
        }

        /* ====== TOP BAR ====== */
        .top-bar {
            height: 70px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-light);
            padding: 0 var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .top-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        /* Language Switcher */
        .language-switcher {
            position: relative;
        }

        .lang-trigger {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-medium);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .lang-trigger:hover {
            border-color: var(--accent-primary);
        }

        .lang-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            overflow: hidden;
        }

        .lang-flag img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-medium);
            border-radius: var(--radius-md);
            min-width: 200px;
            display: none;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
        }

        .lang-dropdown.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .lang-option {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .lang-option:hover {
            background: var(--bg-hover);
        }

        .lang-option.active {
            background: rgba(0, 217, 255, 0.1);
            color: var(--accent-primary);
        }

        /* Mobile Menu Toggle */
        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* ====== PAGES ====== */
        .page {
            display: none;
            padding: var(--spacing-xl);
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ====== DASHBOARD ====== */
        .welcome-section {
            margin-bottom: var(--spacing-xl);
        }

        .welcome-card {
            background: var(--gradient-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-md);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
        }

        .stat-card {
            background: var(--gradient-card);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-light);
            transition: all var(--transition-normal);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-glow);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(0, 217, 255, 0.1);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--accent-primary);
            margin-bottom: var(--spacing-sm);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .stat-label {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-top: 4px;
        }

        /* ====== EQUIPMENT CATALOG ====== */
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .equipment-card {
            background: var(--gradient-card);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--border-light);
            transition: all var(--transition-normal);
            position: relative;
        }

        .equipment-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-glow);
        }

        .equipment-header {
            padding: var(--spacing-lg);
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(123, 97, 255, 0.1));
            border-bottom: 1px solid var(--border-light);
        }

        .equipment-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin-bottom: var(--spacing-sm);
        }

        .equipment-body {
            padding: var(--spacing-lg);
        }

        .equipment-specs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: var(--spacing-md) 0;
        }

        .spec-tag {
            background: rgba(0, 217, 255, 0.1);
            color: var(--accent-primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .equipment-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        /* ====== SIMULATORS ====== */
        .simulator-container {
            background: var(--gradient-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-light);
            margin-bottom: var(--spacing-xl);
            overflow: hidden;
        }

        .simulator-header {
            padding: var(--spacing-lg);
            background: rgba(0, 217, 255, 0.05);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .simulator-tabs {
            display: flex;
            gap: var(--spacing-xs);
            background: var(--bg-tertiary);
            padding: 4px;
            border-radius: var(--radius-sm);
        }

        .simulator-tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .simulator-tab:hover {
            color: var(--text-primary);
        }

        .simulator-tab.active {
            background: var(--gradient-primary);
            color: var(--bg-primary);
        }

        .simulator-body {
            padding: var(--spacing-xl);
        }

        /* OTDR Simulator */
        .otdr-interface {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--spacing-xl);
            height: 500px;
        }

        .otdr-controls {
            background: var(--bg-tertiary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .control-label i {
            color: var(--accent-primary);
        }

        .control-input {
            background: var(--bg-card);
            border: 1px solid var(--border-medium);
            color: var(--text-primary);
            padding: 10px 16px;
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 0.875rem;
            transition: all var(--transition-fast);
        }

        .control-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(0, 217, 255, 0.2);
        }

        .otdr-display {
            background: #0a0a1a;
            border-radius: var(--radius-lg);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-medium);
        }

        .otdr-canvas {
            width: 100%;
            height: 100%;
        }

        /* ====== BUTTONS ====== */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-decoration: none;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-medium);
        }

        .btn-secondary:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent-success), #00cc88);
            color: var(--bg-primary);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--accent-danger), #ff2e43);
            color: var(--text-primary);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.875rem;
        }

        /* ====== MODAL ====== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: var(--spacing-md);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--gradient-card);
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        .modal-close:hover {
            color: var(--accent-danger);
        }

        .modal-body {
            padding: var(--spacing-lg);
        }

        /* ====== TABS ====== */
        .tabs {
            display: flex;
            gap: 2px;
            background: var(--bg-tertiary);
            padding: 2px;
            border-radius: var(--radius-sm);
            margin-bottom: var(--spacing-lg);
        }

        .tab {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            text-align: center;
            transition: all var(--transition-fast);
            border-radius: var(--radius-sm);
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            background: var(--gradient-primary);
            color: var(--bg-primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* ====== CODE BLOCKS ====== */
        .code-block {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: var(--spacing-md) 0;
            border: 1px solid var(--border-medium);
        }

        .code-line {
            padding: 2px 0;
            color: var(--text-code);
        }

        .code-comment {
            color: var(--text-muted);
        }

        /* ====== PROGRESS BARS ====== */
        .progress-container {
            margin: var(--spacing-md) 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 0.875rem;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* ====== TOOLTIPS ====== */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-align: center;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            border: 1px solid var(--border-medium);
            pointer-events: none;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* ====== RESPONSIVE DESIGN ====== */
        @media (max-width: 1200px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            body[dir="rtl"] .sidebar {
                transform: translateX(100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            body[dir="rtl"] .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-toggle {
                display: block;
            }
            
            .otdr-interface {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .otdr-controls {
                order: 2;
            }
        }

        @media (max-width: 768px) {
            .page {
                padding: var(--spacing-md);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .equipment-grid {
                grid-template-columns: 1fr;
            }
            
            .top-actions {
                display: none;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .simulator-tabs {
                overflow-x: auto;
                padding: 4px;
            }
            
            .simulator-tab {
                white-space: nowrap;
            }
        }

        /* ====== ANIMATIONS ====== */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Utility Classes */
        .animate-pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        .animate-slide-left {
            animation: slideInLeft 0.5s ease;
        }

        .animate-slide-right {
            animation: slideInRight 0.5s ease;
        }

        .animate-bounce {
            animation: bounce 2s ease-in-out infinite;
        }

        .hidden {
            display: none !important;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-tertiary);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Status Indicators */
        .status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-online {
            background: rgba(0, 255, 157, 0.1);
            color: var(--accent-success);
        }

        .status-offline {
            background: rgba(255, 71, 87, 0.1);
            color: var(--accent-danger);
        }

        .status-warning {
            background: rgba(255, 204, 0, 0.1);
            color: var(--accent-warning);
        }

        /* Grid System */
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: calc(-1 * var(--spacing-sm));
        }

        .col {
            flex: 1;
            padding: var(--spacing-sm);
            min-width: 250px;
        }

        /* Card Variations */
        .card {
            background: var(--gradient-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-light);
            transition: all var(--transition-normal);
        }

        .card:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-md);
        }

        /* Table Styles */
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .table th {
            background: rgba(0, 217, 255, 0.1);
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .table td {
            padding: 12px 16px;
            border-top: 1px solid var(--border-light);
        }

        .table tr:hover {
            background: var(--bg-hover);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-medium);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            transition: all var(--transition-fast);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(0, 217, 255, 0.2);
        }

        /* Alert Boxes */
        .alert {
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            border-left: 4px solid;
        }

        .alert-success {
            background: rgba(0, 255, 157, 0.1);
            border-left-color: var(--accent-success);
            color: var(--accent-success);
        }

        .alert-warning {
            background: rgba(255, 204, 0, 0.1);
            border-left-color: var(--accent-warning);
            color: var(--accent-warning);
        }

        .alert-danger {
            background: rgba(255, 71, 87, 0.1);
            border-left-color: var(--accent-danger);
            color: var(--accent-danger);
        }

        .alert-info {
            background: rgba(0, 217, 255, 0.1);
            border-left-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        /* Badge Styles */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background: rgba(0, 217, 255, 0.2);
            color: var(--accent-primary);
        }

        .badge-success {
            background: rgba(0, 255, 157, 0.2);
            color: var(--accent-success);
        }

        .badge-warning {
            background: rgba(255, 204, 0, 0.2);
            color: var(--accent-warning);
        }

        .badge-danger {
            background: rgba(255, 71, 87, 0.2);
            color: var(--accent-danger);
        }
    </style>
</head>
<body>
    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div class="logo-text">FiberAcademy</div>
                </div>
            </div>

            <nav class="nav-menu">
                <div class="nav-section">
                    <div class="nav-section-title">Learning Path</div>
                    <div class="nav-item active" data-page="dashboard">
                        <div class="nav-icon"><i class="fas fa-home"></i></div>
                        <div class="nav-text">Dashboard</div>
                        <div class="nav-badge">New</div>
                    </div>
                    <div class="nav-item" data-page="fundamentals">
                        <div class="nav-icon"><i class="fas fa-book"></i></div>
                        <div class="nav-text">Fundamentals</div>
                    </div>
                    <div class="nav-item" data-page="equipment">
                        <div class="nav-icon"><i class="fas fa-tools"></i></div>
                        <div class="nav-text">Equipment</div>
                        <div class="nav-badge">24</div>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Training Tools</div>
                    <div class="nav-item" data-page="simulators">
                        <div class="nav-icon"><i class="fas fa-desktop"></i></div>
                        <div class="nav-text">Simulators</div>
                        <div class="nav-badge">8</div>
                    </div>
                    <div class="nav-item" data-page="installation">
                        <div class="nav-icon"><i class="fas fa-hard-hat"></i></div>
                        <div class="nav-text">Installation</div>
                    </div>
                    <div class="nav-item" data-page="testing">
                        <div class="nav-icon"><i class="fas fa-vial"></i></div>
                        <div class="nav-text">Testing</div>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Reference</div>
                    <div class="nav-item" data-page="troubleshooting">
                        <div class="nav-icon"><i class="fas fa-bug"></i></div>
                        <div class="nav-text">Troubleshooting</div>
                    </div>
                    <div class="nav-item" data-page="standards">
                        <div class="nav-icon"><i class="fas fa-file-contract"></i></div>
                        <div class="nav-text">Standards</div>
                    </div>
                    <div class="nav-item" data-page="calculators">
                        <div class="nav-icon"><i class="fas fa-calculator"></i></div>
                        <div class="nav-text">Calculators</div>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Progress</div>
                    <div class="nav-item" data-page="progress">
                        <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="nav-text">Progress</div>
                    </div>
                    <div class="nav-item" data-page="certification">
                        <div class="nav-icon"><i class="fas fa-award"></i></div>
                        <div class="nav-text">Certification</div>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <button class="mobile-toggle" id="mobileToggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="page-title" id="pageTitle">Dashboard</div>
                
                <div class="top-actions">
                    <!-- Language Switcher -->
                    <div class="language-switcher">
                        <button class="lang-trigger" id="langTrigger">
                            <div class="lang-flag">
                                <img src="https://flagcdn.com/w40/us.png" alt="English" id="currentFlag">
                            </div>
                            <span id="currentLang">English</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="lang-dropdown" id="langDropdown">
                            <div class="lang-option active" data-lang="en">
                                <div class="lang-flag">
                                    <img src="https://flagcdn.com/w40/us.png" alt="English">
                                </div>
                                <span>English</span>
                            </div>
                            <div class="lang-option" data-lang="fr">
                                <div class="lang-flag">
                                    <img src="https://flagcdn.com/w40/fr.png" alt="FranÃ§ais">
                                </div>
                                <span>FranÃ§ais</span>
                            </div>
                            <div class="lang-option" data-lang="ar">
                                <div class="lang-flag">
                                    <img src="https://flagcdn.com/w40/sa.png" alt="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
                                </div>
                                <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Menu -->
                    <button class="btn btn-secondary" id="userMenu">
                        <i class="fas fa-user"></i>
                        <span>Student</span>
                    </button>
                </div>
            </div>

            <!-- Pages -->
            <!-- Dashboard Page -->
            <section id="page-dashboard" class="page active">
                <div class="welcome-section">
                    <div class="welcome-card">
                        <h1>Welcome to FiberOptics Academy</h1>
                        <p class="text-muted">Master fiber optics technology through interactive learning, simulations, and hands-on training.</p>
                        <div class="equipment-actions" style="margin-top: var(--spacing-lg);">
                            <button class="btn btn-primary" onclick="showPage('fundamentals')">
                                <i class="fas fa-play"></i> Start Learning
                            </button>
                            <button class="btn btn-secondary" onclick="showPage('simulators')">
                                <i class="fas fa-gamepad"></i> Try Simulators
                            </button>
                        </div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card animate-slide-left">
                        <div class="stat-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="stat-value">12</div>
                        <div class="stat-label">Learning Modules</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Completion</span>
                                <span>42%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 42%;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card animate-slide-left" style="animation-delay: 0.1s;">
                        <div class="stat-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <div class="stat-value">8</div>
                        <div class="stat-label">Interactive Simulators</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Completed</span>
                                <span>3/8</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 37.5%;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card animate-slide-left" style="animation-delay: 0.2s;">
                        <div class="stat-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="stat-value">24</div>
                        <div class="stat-label">Equipment Types</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Mastered</span>
                                <span>8/24</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 33%;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card animate-slide-left" style="animation-delay: 0.3s;">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-value">156</div>
                        <div class="stat-label">Learning Hours</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>This Month</span>
                                <span>32h</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 64%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <h2>Quick Actions</h2>
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-bolt text-warning"></i> Start Fundamentals</h3>
                            <p class="text-muted">Learn the basics of fiber optics, light transmission, and network architecture.</p>
                            <button class="btn btn-primary btn-small" onclick="showPage('fundamentals')">
                                Start Module
                            </button>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-gamepad text-success"></i> OTDR Simulator</h3>
                            <p class="text-muted">Practice reading OTDR traces and identifying faults in fiber networks.</p>
                            <button class="btn btn-primary btn-small" onclick="showPage('simulators')">
                                Launch Simulator
                            </button>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-tools text-info"></i> Equipment Guide</h3>
                            <p class="text-muted">Explore all fiber optic tools and learn how to use them properly.</p>
                            <button class="btn btn-primary btn-small" onclick="showPage('equipment')">
                                Browse Equipment
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Fundamentals Page -->
            <section id="page-fundamentals" class="page">
                <div class="welcome-card">
                    <h1>Fiber Optics Fundamentals</h1>
                    <p class="text-muted">Master the basic principles of fiber optic technology</p>
                </div>

                <div class="tabs">
                    <button class="tab active" data-tab="theory">Theory</button>
                    <button class="tab" data-tab="components">Components</button>
                    <button class="tab" data-tab="physics">Physics</button>
                    <button class="tab" data-tab="quiz">Quiz</button>
                </div>

                <div class="tab-content active" id="tab-theory">
                    <div class="row">
                        <div class="col">
                            <div class="card">
                                <h3><i class="fas fa-lightbulb"></i> How Light Travels</h3>
                                <p>Fiber optics use total internal reflection to guide light through glass fibers.</p>
                                <div class="code-block">
                                    <div class="code-line">// Total Internal Reflection</div>
                                    <div class="code-line">if (n1 > n2 && Î¸ > Î¸c) {</div>
                                    <div class="code-line">    light.reflect();</div>
                                    <div class="code-line">} else {</div>
                                    <div class="code-line">    light.refract();</div>
                                    <div class="code-line">}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card">
                                <h3><i class="fas fa-wave-square"></i> Wavelengths</h3>
                                <p>Different wavelengths are used for different applications in fiber optics.</p>
                                <div class="table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Wavelength</th>
                                                <th>Application</th>
                                                <th>Attenuation</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>850nm</td>
                                                <td>Multimode</td>
                                                <td>3.0 dB/km</td>
                                            </tr>
                                            <tr>
                                                <td>1310nm</td>
                                                <td>Single Mode</td>
                                                <td>0.4 dB/km</td>
                                            </tr>
                                            <tr>
                                                <td>1550nm</td>
                                                <td>Long Haul</td>
                                                <td>0.2 dB/km</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="tab-components">
                    <h2>Fiber Optic Components</h2>
                    <div class="equipment-grid">
                        <!-- Component cards will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Equipment Page -->
            <section id="page-equipment" class="page">
                <div class="welcome-card">
                    <h1>Equipment Catalog</h1>
                    <p class="text-muted">Learn about all fiber optic equipment and tools</p>
                </div>

                <div class="tabs">
                    <button class="tab active" data-tab="all">All Equipment</button>
                    <button class="tab" data-tab="testing">Testing Tools</button>
                    <button class="tab" data-tab="splicing">Splicing Tools</button>
                    <button class="tab" data-tab="termination">Termination</button>
                </div>

                <div class="tab-content active" id="tab-all">
                    <div class="equipment-grid" id="equipmentGrid">
                        <!-- Equipment cards will be loaded dynamically -->
                    </div>
                </div>
            </section>

            <!-- Simulators Page -->
            <section id="page-simulators" class="page">
                <div class="welcome-card">
                    <h1>Interactive Simulators</h1>
                    <p class="text-muted">Practice with virtual equipment and real-world scenarios</p>
                </div>

                <div class="simulator-container">
                    <div class="simulator-header">
                        <h2>OTDR Trace Analyzer</h2>
                        <div class="simulator-tabs">
                            <button class="simulator-tab active" data-sim="otdr">OTDR</button>
                            <button class="simulator-tab" data-sim="splicer">Fusion Splicer</button>
                            <button class="simulator-tab" data-sim="power">Power Meter</button>
                            <button class="simulator-tab" data-sim="inspection">Inspection</button>
                        </div>
                    </div>
                    
                    <div class="simulator-body">
                        <div class="otdr-interface">
                            <div class="otdr-controls">
                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-wave-square"></i> Wavelength
                                    </label>
                                    <select class="control-input" id="wavelength">
                                        <option value="1310">1310nm</option>
                                        <option value="1550" selected>1550nm</option>
                                        <option value="1625">1625nm</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-expand-alt"></i> Pulse Width
                                    </label>
                                    <select class="control-input" id="pulseWidth">
                                        <option value="10">10ns</option>
                                        <option value="100" selected>100ns</option>
                                        <option value="1000">1000ns</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-ruler"></i> Range
                                    </label>
                                    <select class="control-input" id="range">
                                        <option value="10">10km</option>
                                        <option value="25" selected>25km</option>
                                        <option value="50">50km</option>
                                    </select>
                                </div>

                                <div class="simulator-actions">
                                    <button class="btn btn-primary" onclick="startOTDR()">
                                        <i class="fas fa-play"></i> Start Measurement
                                    </button>
                                    <button class="btn btn-secondary" onclick="analyzeTrace()">
                                        <i class="fas fa-search"></i> Analyze Trace
                                    </button>
                                    <button class="btn btn-danger" onclick="resetOTDR()">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-info-circle"></i> Simulation Mode
                                    </label>
                                    <select class="control-input" id="simMode">
                                        <option value="beginner">Beginner</option>
                                        <option value="intermediate" selected>Intermediate</option>
                                        <option value="advanced">Advanced</option>
                                    </select>
                                </div>
                            </div>

                            <div class="otdr-display">
                                <canvas id="otdrCanvas" class="otdr-canvas"></canvas>
                            </div>
                        </div>

                        <div id="analysisResults" class="hidden" style="margin-top: var(--spacing-lg);">
                            <div class="card">
                                <h3><i class="fas fa-chart-bar"></i> Analysis Results</h3>
                                <div id="resultsContent">
                                    <!-- Results will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h2 style="margin-top: var(--spacing-xl);">Other Simulators</h2>
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-bolt"></i> Fusion Splicer</h3>
                            <p class="text-muted">Practice fiber alignment and splicing techniques.</p>
                            <button class="btn btn-secondary btn-small" onclick="openSimulator('splicer')">
                                Launch Simulator
                            </button>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-tachometer-alt"></i> Power Meter</h3>
                            <p class="text-muted">Learn to measure optical power and calculate loss.</p>
                            <button class="btn btn-secondary btn-small" onclick="openSimulator('power')">
                                Launch Simulator
                            </button>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-microscope"></i> Fiber Inspection</h3>
                            <p class="text-muted">Inspect fiber connectors for defects and contamination.</p>
                            <button class="btn btn-secondary btn-small" onclick="openSimulator('inspection')">
                                Launch Simulator
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Other pages would continue here... -->
        </main>
    </div>

    <!-- Equipment Modal -->
    <div class="modal" id="equipmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Equipment Details</h2>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Simulator Modal -->
    <div class="modal" id="simulatorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="simulatorTitle">Simulator</h2>
                <button class="modal-close" onclick="closeSimulator()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="simulatorBody">
                <!-- Simulator content loaded dynamically -->
            </div>
        </div>
    </div>

    <script>
        // ==================== GLOBAL STATE ====================
        const APP_STATE = {
            currentPage: 'dashboard',
            currentLanguage: 'en',
            translations: {},
            userProgress: {
                modules: 42,
                simulators: 3,
                equipment: 8,
                hours: 156
            },
            otdrData: null,
            activeSimulator: null,
            equipmentData: [],
            simulators: {}
        };

        // ==================== TRANSLATION SYSTEM ====================
        class TranslationEngine {
            constructor() {
                this.dictionary = {
                    en: {
                        // Navigation
                        'nav_dashboard': 'Dashboard',
                        'nav_fundamentals': 'Fundamentals',
                        'nav_equipment': 'Equipment',
                        'nav_simulators': 'Simulators',
                        'nav_installation': 'Installation',
                        'nav_testing': 'Testing',
                        'nav_troubleshooting': 'Troubleshooting',
                        'nav_standards': 'Standards',
                        'nav_calculators': 'Calculators',
                        'nav_progress': 'Progress',
                        'nav_certification': 'Certification',
                        
                        // Dashboard
                        'dashboard_title': 'Dashboard',
                        'dashboard_welcome': 'Welcome to FiberOptics Academy',
                        'dashboard_subtitle': 'Master fiber optics technology through interactive learning',
                        'stat_modules': 'Learning Modules',
                        'stat_simulators': 'Interactive Simulators',
                        'stat_equipment': 'Equipment Types',
                        'stat_hours': 'Learning Hours',
                        
                        // Equipment
                        'equipment_title': 'Equipment Catalog',
                        'equipment_subtitle': 'Learn about all fiber optic equipment and tools',
                        
                        // Simulators
                        'simulators_title': 'Interactive Simulators',
                        'simulators_subtitle': 'Practice with virtual equipment',
                        
                        // Buttons
                        'btn_start': 'Start Learning',
                        'btn_simulate': 'Try Simulators',
                        'btn_details': 'View Details',
                        'btn_launch': 'Launch Simulator',
                        'btn_analyze': 'Analyze',
                        'btn_reset': 'Reset',
                        'btn_next': 'Next Lesson',
                        'btn_prev': 'Previous',
                        'btn_save': 'Save Progress',
                        
                        // Messages
                        'msg_loading': 'Loading...',
                        'msg_success': 'Success!',
                        'msg_error': 'An error occurred',
                        'msg_complete': 'Module Completed!',
                        'msg_congrats': 'Congratulations!'
                    },
                    fr: {
                        // Navigation
                        'nav_dashboard': 'Tableau de bord',
                        'nav_fundamentals': 'Fondamentaux',
                        'nav_equipment': 'Ã‰quipement',
                        'nav_simulators': 'Simulateurs',
                        'nav_installation': 'Installation',
                        'nav_testing': 'Test',
                        'nav_troubleshooting': 'DÃ©pannage',
                        'nav_standards': 'Normes',
                        'nav_calculators': 'Calculatrices',
                        'nav_progress': 'Progression',
                        'nav_certification': 'Certification',
                        
                        // Dashboard
                        'dashboard_title': 'Tableau de bord',
                        'dashboard_welcome': 'Bienvenue Ã  FiberOptics Academy',
                        'dashboard_subtitle': 'MaÃ®trisez la technologie fibre optique',
                        'stat_modules': 'Modules d\'apprentissage',
                        'stat_simulators': 'Simulateurs interactifs',
                        'stat_equipment': 'Types d\'Ã©quipement',
                        'stat_hours': 'Heures d\'apprentissage',
                        
                        // Equipment
                        'equipment_title': 'Catalogue d\'Ã©quipement',
                        'equipment_subtitle': 'Apprenez sur tous les Ã©quipements',
                        
                        // Simulators
                        'simulators_title': 'Simulateurs interactifs',
                        'simulators_subtitle': 'Pratiquez avec Ã©quipement virtuel',
                        
                        // Buttons
                        'btn_start': 'Commencer',
                        'btn_simulate': 'Essayer simulateurs',
                        'btn_details': 'Voir dÃ©tails',
                        'btn_launch': 'Lancer simulateur',
                        'btn_analyze': 'Analyser',
                        'btn_reset': 'RÃ©initialiser',
                        'btn_next': 'LeÃ§on suivante',
                        'btn_prev': 'PrÃ©cÃ©dent',
                        'btn_save': 'Sauvegarder',
                        
                        // Messages
                        'msg_loading': 'Chargement...',
                        'msg_success': 'SuccÃ¨s!',
                        'msg_error': 'Erreur',
                        'msg_complete': 'Module terminÃ©!',
                        'msg_congrats': 'FÃ©licitations!'
                    },
                    ar: {
                        // Navigation
                        'nav_dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                        'nav_fundamentals': 'Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª',
                        'nav_equipment': 'Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',
                        'nav_simulators': 'Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©',
                        'nav_installation': 'Ø§Ù„ØªØ«Ø¨ÙŠØª',
                        'nav_testing': 'Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                        'nav_troubleshooting': 'Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡',
                        'nav_standards': 'Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±',
                        'nav_calculators': 'Ø§Ù„Ø­Ø§Ø³Ø¨Ø§Øª',
                        'nav_progress': 'Ø§Ù„ØªÙ‚Ø¯Ù…',
                        'nav_certification': 'Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª',
                        
                        // Dashboard
                        'dashboard_title': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                        'dashboard_welcome': 'Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¨ØµØ±ÙŠØ©',
                        'dashboard_subtitle': 'Ø§ØªÙ‚Ù† ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¨ØµØ±ÙŠØ©',
                        'stat_modules': 'ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªØ¹Ù„Ù…',
                        'stat_simulators': 'Ù…Ø­Ø§ÙƒÙŠØ§Øª ØªÙØ§Ø¹Ù„ÙŠØ©',
                        'stat_equipment': 'Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',
                        'stat_hours': 'Ø³Ø§Ø¹Ø§Øª Ø§Ù„ØªØ¹Ù„Ù…',
                        
                        // Equipment
                        'equipment_title': 'ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',
                        'equipment_subtitle': 'ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„Ø¨ØµØ±ÙŠØ©',
                        
                        // Simulators
                        'simulators_title': 'Ø§Ù„Ù…Ø­Ø§ÙƒÙŠØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©',
                        'simulators_subtitle': 'ØªØ¯Ø±Ø¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©',
                        
                        // Buttons
                        'btn_start': 'Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù…',
                        'btn_simulate': 'Ø¬Ø±Ø¨ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©',
                        'btn_details': 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„',
                        'btn_launch': 'ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©',
                        'btn_analyze': 'ØªØ­Ù„ÙŠÙ„',
                        'btn_reset': 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†',
                        'btn_next': 'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ',
                        'btn_prev': 'Ø§Ù„Ø³Ø§Ø¨Ù‚',
                        'btn_save': 'Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…',
                        
                        // Messages
                        'msg_loading': 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
                        'msg_success': 'Ù†Ø¬Ø§Ø­!',
                        'msg_error': 'Ø­Ø¯Ø« Ø®Ø·Ø£',
                        'msg_complete': 'ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„ÙˆØ­Ø¯Ø©!',
                        'msg_congrats': 'ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!'
                    }
                };
                
                this.currentLang = 'en';
                this.initialize();
            }

            initialize() {
                // Load saved language or default to English
                const savedLang = localStorage.getItem('fiber_lang') || 'en';
                this.setLanguage(savedLang);
            }

            setLanguage(lang) {
                if (!this.dictionary[lang]) return;
                
                this.currentLang = lang;
                APP_STATE.currentLanguage = lang;
                
                // Update all translatable elements
                this.updatePageText();
                
                // Update UI elements
                this.updateUI();
                
                // Update RTL for Arabic
                document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
                
                // Update flag and language name
                this.updateLanguageSwitcher(lang);
                
                // Save preference
                localStorage.setItem('fiber_lang', lang);
            }

            translate(key) {
                return this.dictionary[this.currentLang]?.[key] || key;
            }

            updatePageText() {
                // Update navigation
                document.querySelectorAll('.nav-text').forEach((el, index) => {
                    const keys = [
                        'nav_dashboard',
                        'nav_fundamentals',
                        'nav_equipment',
                        'nav_simulators',
                        'nav_installation',
                        'nav_testing',
                        'nav_troubleshooting',
                        'nav_standards',
                        'nav_calculators',
                        'nav_progress',
                        'nav_certification'
                    ];
                    if (keys[index]) {
                        el.textContent = this.translate(keys[index]);
                    }
                });

                // Update dashboard stats
                const statLabels = document.querySelectorAll('.stat-label');
                if (statLabels.length >= 4) {
                    statLabels[0].textContent = this.translate('stat_modules');
                    statLabels[1].textContent = this.translate('stat_simulators');
                    statLabels[2].textContent = this.translate('stat_equipment');
                    statLabels[3].textContent = this.translate('stat_hours');
                }

                // Update page titles
                const pageTitles = {
                    'dashboard': this.translate('dashboard_title'),
                    'fundamentals': this.translate('nav_fundamentals'),
                    'equipment': this.translate('equipment_title'),
                    'simulators': this.translate('simulators_title')
                };

                if (pageTitles[APP_STATE.currentPage]) {
                    document.getElementById('pageTitle').textContent = pageTitles[APP_STATE.currentPage];
                }

                // Update welcome text
                const welcomeTitle = document.querySelector('.welcome-card h1');
                if (welcomeTitle && APP_STATE.currentPage === 'dashboard') {
                    welcomeTitle.textContent = this.translate('dashboard_welcome');
                }

                const welcomeSubtitle = document.querySelector('.welcome-card p');
                if (welcomeSubtitle && APP_STATE.currentPage === 'dashboard') {
                    welcomeSubtitle.textContent = this.translate('dashboard_subtitle');
                }
            }

            updateUI() {
                // Update buttons with translation keys
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    const translation = this.translate(key);
                    
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translation;
                    } else {
                        element.textContent = translation;
                    }
                });
            }

            updateLanguageSwitcher(lang) {
                const langNames = {
                    'en': 'English',
                    'fr': 'FranÃ§ais',
                    'ar': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'
                };
                
                const flagUrls = {
                    'en': 'https://flagcdn.com/w40/us.png',
                    'fr': 'https://flagcdn.com/w40/fr.png',
                    'ar': 'https://flagcdn.com/w40/sa.png'
                };
                
                document.getElementById('currentLang').textContent = langNames[lang];
                document.getElementById('currentFlag').src = flagUrls[lang];
                
                // Update active option in dropdown
                document.querySelectorAll('.lang-option').forEach(option => {
                    option.classList.toggle('active', option.dataset.lang === lang);
                });
            }
        }

        // ==================== PAGE MANAGEMENT ====================
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                targetPage.classList.add('active');
                APP_STATE.currentPage = pageId;
                
                // Update active nav item
                const navItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
                if (navItem) {
                    navItem.classList.add('active');
                }
                
                // Update page title
                updatePageTitle(pageId);
                
                // Initialize page content
                initializePage(pageId);
                
                // Close mobile sidebar
                if (window.innerWidth < 1200) {
                    document.getElementById('sidebar').classList.remove('active');
                }
            }
        }

        function updatePageTitle(pageId) {
            const titles = {
                'dashboard': 'Dashboard',
                'fundamentals': 'Fundamentals',
                'equipment': 'Equipment Catalog',
                'simulators': 'Training Simulators',
                'installation': 'Installation Guide',
                'testing': 'Testing Procedures',
                'troubleshooting': 'Troubleshooting',
                'standards': 'Standards Reference',
                'calculators': 'Calculators',
                'progress': 'Learning Progress',
                'certification': 'Certification'
            };
            
            if (titles[pageId]) {
                document.getElementById('pageTitle').textContent = titles[pageId];
            }
        }

        function initializePage(pageId) {
            switch(pageId) {
                case 'dashboard':
                    updateDashboardStats();
                    break;
                case 'equipment':
                    loadEquipmentData();
                    break;
                case 'simulators':
                    initOTDRSimulator();
                    break;
                case 'fundamentals':
                    loadFundamentals();
                    break;
            }
        }

        // ==================== DASHBOARD ====================
        function updateDashboardStats() {
            const progressElements = {
                modules: document.querySelector('.stat-card:nth-child(1) .progress-fill'),
                simulators: document.querySelector('.stat-card:nth-child(2) .progress-fill'),
                equipment: document.querySelector('.stat-card:nth-child(3) .progress-fill'),
                hours: document.querySelector('.stat-card:nth-child(4) .progress-fill')
            };

            const values = {
                modules: document.querySelector('.stat-card:nth-child(1) .stat-value'),
                simulators: document.querySelector('.stat-card:nth-child(2) .stat-value'),
                equipment: document.querySelector('.stat-card:nth-child(3) .stat-value'),
                hours: document.querySelector('.stat-card:nth-child(4) .stat-value')
            };

            if (progressElements.modules) {
                progressElements.modules.style.width = `${APP_STATE.userProgress.modules}%`;
                values.modules.textContent = '12';
            }
            if (progressElements.simulators) {
                progressElements.simulators.style.width = `${(APP_STATE.userProgress.simulators / 8) * 100}%`;
                values.simulators.textContent = '8';
            }
            if (progressElements.equipment) {
                progressElements.equipment.style.width = `${(APP_STATE.userProgress.equipment / 24) * 100}%`;
                values.equipment.textContent = '24';
            }
            if (progressElements.hours) {
                progressElements.hours.style.width = `${(APP_STATE.userProgress.hours / 250) * 100}%`;
                values.hours.textContent = APP_STATE.userProgress.hours;
            }
        }

        // ==================== EQUIPMENT SYSTEM ====================
        function loadEquipmentData() {
            const equipmentData = [
                {
                    id: 'otdr',
                    name: 'OTDR (Optical Time Domain Reflectometer)',
                    category: 'testing',
                    icon: 'fas fa-wave-square',
                    description: 'Measures fiber characteristics and locates faults by analyzing backscattered light.',
                    specs: [
                        'Dynamic Range: 45dB @ 1550nm',
                        'Dead Zone: 0.8m (event), 3m (attenuation)',
                        'Wavelengths: 1310/1550/1625nm',
                        'Distance Range: 250km',
                        'Accuracy: Â±(1m + 0.005% of distance)'
                    ],
                    procedures: [
                        '1. Clean connector with alcohol wipes',
                        '2. Connect launch cable to OTDR',
                        '3. Set wavelength (1550nm for long distance)',
                        '4. Set pulse width based on fiber length',
                        '5. Set measurement range to 1.5x fiber length',
                        '6. Start measurement and wait for trace',
                        '7. Analyze events and calculate losses'
                    ]
                },
                {
                    id: 'fusion-splicer',
                    name: 'Fusion Splicer',
                    category: 'splicing',
                    icon: 'fas fa-bolt',
                    description: 'Joins two optical fibers by melting them together using an electric arc.',
                    specs: [
                        'Splice Loss: <0.02dB typical',
                        'Splice Time: 9 seconds',
                        'Core Alignment: Automatic (PAS)',
                        'Battery Life: 150+ splices',
                        'Fiber Types: SM, MM, DS, NZ-DSF'
                    ],
                    procedures: [
                        '1. Strip 40mm of buffer coating',
                        '2. Clean fiber with alcohol wipes',
                        '3. Cleave fiber with precision cleaver (8Â° angle)',
                        '4. Place fibers in splicer holders',
                        '5. Close cover and press START',
                        '6. Monitor automatic alignment process',
                        '7. Apply heat shrink protector',
                        '8. Test splice with power meter'
                    ]
                },
                {
                    id: 'power-meter',
                    name: 'Optical Power Meter',
                    category: 'testing',
                    icon: 'fas fa-tachometer-alt',
                    description: 'Measures optical power in dBm to calculate loss and verify link performance.',
                    specs: [
                        'Range: +3 to -70 dBm',
                        'Accuracy: Â±0.2 dB',
                        'Wavelengths: 850/1300/1310/1490/1550/1625nm',
                        'Calibration: NIST traceable',
                        'Display: Auto-ranging, dB/dBm selectable'
                    ],
                    procedures: [
                        '1. Set reference wavelength',
                        '2. Connect power meter to light source',
                        '3. Press REF to set reference level',
                        '4. Disconnect and measure through fiber',
                        '5. Calculate loss: Loss = Reference - Measured',
                        '6. Compare with budget requirements'
                    ]
                },
                {
                    id: 'inspection-microscope',
                    name: 'Fiber Inspection Microscope',
                    category: 'testing',
                    icon: 'fas fa-microscope',
                    description: 'Examines fiber end-faces for contamination, scratches, and defects.',
                    specs: [
                        'Magnification: 200x-400x',
                        'Light Source: LED illumination',
                        'View: Side-view and end-view',
                        'Standards: IEC 61300-3-35',
                        'Resolution: 1Âµm defect detection'
                    ],
                    procedures: [
                        '1. Clean connector with dry cleaning tool',
                        '2. Insert connector into microscope',
                        '3. Adjust focus and illumination',
                        '4. Inspect for contamination (dust, oil)',
                        '5. Check for scratches and pits',
                        '6. Grade connector according to standards',
                        '7. Clean again if defects found'
                    ]
                },
                {
                    id: 'cleaver',
                    name: 'Precision Cleaver',
                    category: 'termination',
                    icon: 'fas fa-cut',
                    description: 'Creates perfect 90Â° or 8Â° angle end-faces on optical fibers for splicing.',
                    specs: [
                        'Cleave Angle: 0.5Â° typical',
                        'Cleave Length: Adjustable 3-20mm',
                        'Fiber Types: 125Âµm to 900Âµm',
                        'Blade Life: 10,000+ cleaves',
                        'Accuracy: Â±0.5Â°'
                    ],
                    procedures: [
                        '1. Strip fiber and clean with alcohol',
                        '2. Set cleave length (typically 8-16mm)',
                        '3. Place fiber in cleaver groove',
                        '4. Close lid and press cleave button',
                        '5. Inspect cleave with microscope',
                        '6. Accept if angle <1Â° and no chips'
                    ]
                },
                {
                    id: 'light-source',
                    name: 'Stable Light Source',
                    category: 'testing',
                    icon: 'fas fa-lightbulb',
                    description: 'Provides stable optical output at specific wavelengths for loss testing.',
                    specs: [
                        'Wavelengths: 850/1300/1310/1490/1550/1625nm',
                        'Stability: Â±0.05 dB over 8 hours',
                        'Output Power: -7 dBm typical',
                        'Modulation: 270Hz/1kHz/2kHz',
                        'Battery: 40+ hours operation'
                    ],
                    procedures: [
                        '1. Select wavelength matching power meter',
                        '2. Turn on and allow 5-minute warm-up',
                        '3. Connect to reference cable',
                        '4. Set modulation frequency',
                        '5. Use with power meter for loss testing',
                        '6. Verify stability before measurements'
                    ]
                },
                {
                    id: 'vfl',
                    name: 'Visual Fault Locator (VFL)',
                    category: 'testing',
                    icon: 'fas fa-exclamation-triangle',
                    description: 'Visible red laser that helps locate breaks, bends, and poor connections.',
                    specs: [
                        'Wavelength: 650nm (visible red)',
                        'Output Power: 1mW (Class II laser)',
                        'Fiber Types: SM/MM up to 5km',
                        'Battery: 100+ hours',
                        'Modes: Continuous/Pulse'
                    ],
                    procedures: [
                        '1. Connect VFL to fiber under test',
                        '2. Turn on in continuous mode',
                        '3. Visually inspect entire cable run',
                        '4. Look for red glow at fault locations',
                        '5. Use pulse mode for long distances',
                        '6. Never look directly into fiber'
                    ]
                },
                {
                    id: 'punch-down-tool',
                    name: 'Fiber Punch Down Tool',
                    category: 'termination',
                    icon: 'fas fa-hammer',
                    description: 'Terminates fiber onto patch panels and enclosures with consistent force.',
                    specs: [
                        'Impact Force: Adjustable',
                        'Blade Types: 110, 66, Krone',
                        'Cut Direction: Angled/Straight',
                        'Weight: 200-400g',
                        'Blade Life: 10,000+ terminations'
                    ],
                    procedures: [
                        '1. Strip fiber leaving 25mm bare fiber',
                        '2. Place fiber in termination slot',
                        '3. Position punch tool at 45Â° angle',
                        '4. Apply firm, even pressure',
                        '5. Trim excess fiber with blade',
                        '6. Test termination with power meter'
                    ]
                }
            ];

            APP_STATE.equipmentData = equipmentData;
            renderEquipmentGrid('all');
        }

        function renderEquipmentGrid(category) {
            const grid = document.getElementById('equipmentGrid');
            if (!grid) return;

            grid.innerHTML = '';
            
            const filteredEquipment = category === 'all' 
                ? APP_STATE.equipmentData 
                : APP_STATE.equipmentData.filter(item => item.category === category);
            
            filteredEquipment.forEach(equipment => {
                const card = document.createElement('div');
                card.className = 'equipment-card animate-slide-left';
                card.innerHTML = `
                    <div class="equipment-header">
                        <div class="equipment-icon">
                            <i class="${equipment.icon}"></i>
                        </div>
                        <h3>${equipment.name}</h3>
                        <span class="badge badge-primary">${equipment.category.toUpperCase()}</span>
                    </div>
                    <div class="equipment-body">
                        <p class="text-muted">${equipment.description}</p>
                        <div class="equipment-specs">
                            ${equipment.specs.slice(0, 3).map(spec => 
                                `<span class="spec-tag">${spec}</span>`
                            ).join('')}
                        </div>
                        <div class="equipment-actions">
                            <button class="btn btn-primary" onclick="showEquipmentDetail('${equipment.id}')">
                                <i class="fas fa-info-circle"></i> Learn More
                            </button>
                            <button class="btn btn-secondary" onclick="launchEquipmentSimulator('${equipment.id}')">
                                <i class="fas fa-play"></i> Simulate
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function showEquipmentDetail(equipmentId) {
            const equipment = APP_STATE.equipmentData.find(item => item.id === equipmentId);
            if (!equipment) return;

            document.getElementById('modalTitle').textContent = equipment.name;
            document.getElementById('modalBody').innerHTML = `
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <h3><i class="${equipment.icon}"></i> Description</h3>
                            <p>${equipment.description}</p>
                            
                            <h3 style="margin-top: var(--spacing-lg);">Key Specifications</h3>
                            <ul style="padding-left: var(--spacing-lg);">
                                ${equipment.specs.map(spec => `<li>${spec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-list-ol"></i> Step-by-Step Procedure</h3>
                            <div class="code-block">
                                ${equipment.procedures.map(step => 
                                    `<div class="code-line">${step}</div>`
                                ).join('')}
                            </div>
                            
                            <h3 style="margin-top: var(--spacing-lg);">Common Issues</h3>
                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>High Loss:</strong> Check cleanliness and alignment
                            </div>
                            <div class="alert alert-danger">
                                <i class="fas fa-times-circle"></i>
                                <strong>No Signal:</strong> Verify connections and power
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="equipment-actions" style="margin-top: var(--spacing-lg); text-align: center;">
                    <button class="btn btn-primary" onclick="launchEquipmentSimulator('${equipmentId}')">
                        <i class="fas fa-play"></i> Launch Simulator
                    </button>
                    <button class="btn btn-secondary" onclick="closeModal()">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            `;

            document.getElementById('equipmentModal').classList.add('active');
        }

        function launchEquipmentSimulator(equipmentId) {
            const simulators = {
                'otdr': launchOTDRSimulator,
                'fusion-splicer': launchSplicerSimulator,
                'power-meter': launchPowerMeterSimulator,
                'inspection-microscope': launchInspectionSimulator,
                'cleaver': launchCleaverSimulator,
                'light-source': launchLightSourceSimulator,
                'vfl': launchVFLSimulator,
                'punch-down-tool': launchPunchToolSimulator
            };

            if (simulators[equipmentId]) {
                simulators[equipmentId]();
            } else {
                alert('Simulator coming soon!');
            }
        }

        // ==================== SIMULATORS ====================
        function initOTDRSimulator() {
            const canvas = document.getElementById('otdrCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            // Draw initial grid
            drawOTDRGrid(ctx, canvas);
        }

        function drawOTDRGrid(ctx, canvas) {
            const width = canvas.width;
            const height = canvas.height;

            // Clear canvas
            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, width, height);

            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;

            // Vertical lines
            for (let x = 0; x < width; x += width / 10) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }

            // Horizontal lines
            for (let y = 0; y < height; y += height / 8) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }

            // Labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.font = '12px Inter';
            
            // Distance labels
            for (let i = 0; i <= 10; i++) {
                const x = (i / 10) * width;
                const distance = i * 2.5; // 25km total
                ctx.fillText(`${distance}km`, x - 10, height - 5);
            }

            // Power label
            ctx.fillText('Power (dBm)', 10, 15);
        }

        function startOTDR() {
            const canvas = document.getElementById('otdrCanvas');
            const ctx = canvas.getContext('2d');
            
            // Show loading
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#00d9ff';
            ctx.font = '20px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('Measuring...', canvas.width / 2, canvas.height / 2);
            
            // Simulate measurement
            setTimeout(() => {
                generateOTDRTrace();
                showAnalysisResults();
            }, 2000);
        }

        function generateOTDRTrace() {
            const canvas = document.getElementById('otdrCanvas');
            const ctx = canvas.getContext('2d');
            
            drawOTDRGrid(ctx, canvas);
            
            // Generate random trace data
            const width = canvas.width;
            const height = canvas.height;
            const points = [];
            
            // Base line
            let y = height * 0.2;
            for (let x = 0; x < width; x += 2) {
                // Add some randomness
                y += (Math.random() - 0.5) * 3;
                y = Math.max(height * 0.1, Math.min(height * 0.9, y));
                
                // Add events at specific positions
                if (x > width * 0.2 && x < width * 0.25) {
                    y = height * 0.5; // Connector
                }
                if (x > width * 0.5 && x < width * 0.55) {
                    y = height * 0.4; // Splice
                }
                if (x > width * 0.8) {
                    y = height * 0.8; // Break
                }
                
                points.push({x, y});
            }
            
            // Draw trace
            ctx.beginPath();
            ctx.strokeStyle = '#00d9ff';
            ctx.lineWidth = 2;
            ctx.moveTo(points[0].x, points[0].y);
            
            for (let i = 1; i < points.length; i++) {
                ctx.lineTo(points[i].x, points[i].y);
            }
            ctx.stroke();
            
            // Draw event markers
            drawEventMarkers(ctx, canvas);
            
            APP_STATE.otdrData = points;
        }

        function drawEventMarkers(ctx, canvas) {
            const width = canvas.width;
            const height = canvas.height;
            
            // Connector at 5km
            const x1 = width * 0.22;
            drawMarker(ctx, x1, height * 0.5, '#ffcc00', 'Connector');
            
            // Splice at 12.5km
            const x2 = width * 0.52;
            drawMarker(ctx, x2, height * 0.4, '#00ff9d', 'Splice');
            
            // Break at 20km
            const x3 = width * 0.82;
            drawMarker(ctx, x3, height * 0.8, '#ff4757', 'Break');
        }

        function drawMarker(ctx, x, y, color, label) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, 6, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = 'white';
            ctx.font = '12px Inter';
            ctx.fillText(label, x - 20, y - 10);
        }

        function analyzeTrace() {
            const resultsDiv = document.getElementById('analysisResults');
            const contentDiv = document.getElementById('resultsContent');
            
            if (!APP_STATE.otdrData) {
                contentDiv.innerHTML = `
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        No trace data available. Please run a measurement first.
                    </div>
                `;
                resultsDiv.classList.remove('hidden');
                return;
            }
            
            const analysis = `
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <h4><i class="fas fa-ruler"></i> Fiber Analysis</h4>
                            <div class="table">
                                <table>
                                    <tr>
                                        <td>Total Length</td>
                                        <td class="text-success">25.3 km</td>
                                    </tr>
                                    <tr>
                                        <td>Attenuation</td>
                                        <td class="text-success">0.21 dB/km</td>
                                    </tr>
                                    <tr>
                                        <td>Total Loss</td>
                                        <td class="text-warning">15.7 dB</td>
                                    </tr>
                                    <tr>
                                        <td>ORL</td>
                                        <td class="text-success">-45 dB</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h4><i class="fas fa-map-marker-alt"></i> Event Locations</h4>
                            <div class="table">
                                <table>
                                    <tr>
                                        <td>5.02 km</td>
                                        <td><span class="badge badge-warning">Connector</span></td>
                                        <td>0.3 dB</td>
                                    </tr>
                                    <tr>
                                        <td>12.15 km</td>
                                        <td><span class="badge badge-success">Splice</span></td>
                                        <td>0.1 dB</td>
                                    </tr>
                                    <tr>
                                        <td>18.47 km</td>
                                        <td><span class="badge badge-danger">Break</span></td>
                                        <td>15.0 dB</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-danger" style="margin-top: var(--spacing-md);">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Critical Issue:</strong> Fiber break detected at 18.47 km. Immediate repair required.
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-lightbulb"></i>
                    <strong>Tip:</strong> Use the Visual Fault Locator (VFL) to pinpoint the exact break location.
                </div>
            `;
            
            contentDiv.innerHTML = analysis;
            resultsDiv.classList.remove('hidden');
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function resetOTDR() {
            const canvas = document.getElementById('otdrCanvas');
            const ctx = canvas.getContext('2d');
            
            drawOTDRGrid(ctx, canvas);
            APP_STATE.otdrData = null;
            
            document.getElementById('analysisResults').classList.add('hidden');
        }

        // ==================== SIMULATOR LAUNCHERS ====================
        function launchOTDRSimulator() {
            showPage('simulators');
            // Switch to OTDR tab
            document.querySelectorAll('.simulator-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector('.simulator-tab[data-sim="otdr"]').classList.add('active');
        }

        function launchSplicerSimulator() {
            document.getElementById('simulatorTitle').textContent = 'Fusion Splicer Simulator';
            document.getElementById('simulatorBody').innerHTML = `
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-bolt"></i> Fusion Splicing Simulation</h3>
                            <p>Practice aligning and splicing optical fibers.</p>
                            
                            <div style="text-align: center; margin: var(--spacing-lg) 0;">
                                <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin: 30px 0;">
                                    <div style="width: 100px; height: 20px; background: linear-gradient(90deg, #333, #666); border-radius: 10px; position: relative;">
                                        <div id="fiber-left" style="position: absolute; right: 0; width: 50px; height: 20px; background: #00d9ff; border-radius: 0 10px 10px 0;"></div>
                                    </div>
                                    <div id="arc-zone" style="width: 40px; height: 40px; background: #ffcc00; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-bolt" style="color: #000;"></i>
                                    </div>
                                    <div style="width: 100px; height: 20px; background: linear-gradient(90deg, #666, #333); border-radius: 10px; position: relative;">
                                        <div id="fiber-right" style="position: absolute; left: 0; width: 50px; height: 20px; background: #00d9ff; border-radius: 10px 0 0 10px;"></div>
                                    </div>
                                </div>
                                
                                <div id="alignment-status" class="alert alert-info">
                                    <i class="fas fa-info-circle"></i>
                                    Ready to splice
                                </div>
                                
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>Alignment</span>
                                        <span id="alignment-percent">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="alignment-bar" class="progress-fill" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="equipment-actions" style="justify-content: center;">
                                <button class="btn btn-primary" onclick="startSplicing()">
                                    <i class="fas fa-play"></i> Start Splicing
                                </button>
                                <button class="btn btn-secondary" onclick="alignFibers()">
                                    <i class="fas fa-arrows-alt-h"></i> Align Fibers
                                </button>
                                <button class="btn btn-danger" onclick="closeSimulator()">
                                    <i class="fas fa-times"></i> Close
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <h3><i class="fas fa-graduation-cap"></i> Learning Objectives</h3>
                            <ul style="padding-left: var(--spacing-lg); margin-bottom: var(--spacing-md);">
                                <li>Understand fiber alignment techniques</li>
                                <li>Learn proper cleaving procedures</li>
                                <li>Master arc calibration</li>
                                <li>Practice loss estimation</li>
                            </ul>
                            
                            <h4>Splice Parameters</h4>
                            <div class="table">
                                <table>
                                    <tr>
                                        <td>Target Loss</td>
                                        <td>< 0.02 dB</td>
                                    </tr>
                                    <tr>
                                        <td>Arc Time</td>
                                        <td>2000 ms</td>
                                    </tr>
                                    <tr>
                                        <td>Arc Power</td>
                                        <td>Medium</td>
                                    </tr>
                                    <tr>
                                        <td>Overlap</td>
                                        <td>15 Âµm</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <div class="alert alert-success" style="margin-top: var(--spacing-md);">
                                <i class="fas fa-check-circle"></i>
                                <strong>Pro Tip:</strong> Always clean fibers before splicing for best results.
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('simulatorModal').classList.add('active');
        }

        function startSplicing() {
            const arcZone = document.getElementById('arc-zone');
            const status = document.getElementById('alignment-status');
            const alignmentBar = document.getElementById('alignment-bar');
            const alignmentPercent = document.getElementById('alignment-percent');
            
            // Animate arc
            arcZone.style.animation = 'pulse 0.5s ease-in-out 3';
            arcZone.style.boxShadow = '0 0 20px #ffcc00';
            
            // Update status
            status.className = 'alert alert-warning';
            status.innerHTML = '<i class="fas fa-bolt"></i> Splicing in progress...';
            
            // Simulate alignment progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                alignmentBar.style.width = `${progress}%`;
                alignmentPercent.textContent = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    status.className = 'alert alert-success';
                    status.innerHTML = '<i class="fas fa-check-circle"></i> Splice completed! Estimated loss: 0.018 dB';
                    arcZone.style.boxShadow = '0 0 10px #00ff9d';
                    
                    // Update user progress
                    APP_STATE.userProgress.simulators++;
                    updateDashboardStats();
                }
            }, 100);
        }

        function alignFibers() {
            const fiberLeft = document.getElementById('fiber-left');
            const fiberRight = document.getElementById('fiber-right');
            const status = document.getElementById('alignment-status');
            
            // Animate alignment
            fiberLeft.style.transform = 'translateX(-5px)';
            fiberRight.style.transform = 'translateX(5px)';
            
            status.className = 'alert alert-info';
            status.innerHTML = '<i class="fas fa-sync-alt"></i> Aligning fibers...';
            
            setTimeout(() => {
                fiberLeft.style.transform = 'translateX(0)';
                fiberRight.style.transform = 'translateX(0)';
                status.innerHTML = '<i class="fas fa-check"></i> Fibers aligned';
            }, 500);
        }

        function launchPowerMeterSimulator() {
            // Similar implementation for power meter simulator
            alert('Power Meter Simulator - Coming Soon!');
        }

        function launchInspectionSimulator() {
            // Similar implementation for inspection simulator
            alert('Fiber Inspection Simulator - Coming Soon!');
        }

        // Add other simulator launchers similarly...

        // ==================== MODAL FUNCTIONS ====================
        function closeModal() {
            document.getElementById('equipmentModal').classList.remove('active');
        }

        function closeSimulator() {
            document.getElementById('simulatorModal').classList.remove('active');
        }

        function openSimulator(simType) {
            switch(simType) {
                case 'splicer':
                    launchSplicerSimulator();
                    break;
                case 'power':
                    launchPowerMeterSimulator();
                    break;
                case 'inspection':
                    launchInspectionSimulator();
                    break;
                default:
                    showPage('simulators');
            }
        }

        // ==================== INITIALIZATION ====================
        function initializeApp() {
            // Initialize translation engine
            window.translator = new TranslationEngine();
            
            // Set up navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.dataset.page;
                    showPage(pageId);
                });
            });
            
            // Set up language switcher
            document.getElementById('langTrigger').addEventListener('click', function() {
                document.getElementById('langDropdown').classList.toggle('active');
            });
            
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.dataset.lang;
                    translator.setLanguage(lang);
                    document.getElementById('langDropdown').classList.remove('active');
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.language-switcher')) {
                    document.getElementById('langDropdown').classList.remove('active');
                }
            });
            
            // Mobile menu toggle
            document.getElementById('mobileToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });
            
            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Update active tab
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`tab-${tabId}`).classList.add('active');
                    
                    // Load content if needed
                    if (tabId === 'components') {
                        loadComponents();
                    }
                });
            });
            
            // Simulator tab switching
            document.querySelectorAll('.simulator-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.simulator-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    // In a full implementation, this would switch simulator interfaces
                });
            });
            
            // Close modals on ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    closeSimulator();
                }
            });
            
            // Close modals on outside click
            document.getElementById('equipmentModal').addEventListener('click', function(e) {
                if (e.target === this) closeModal();
            });
            
            document.getElementById('simulatorModal').addEventListener('click', function(e) {
                if (e.target === this) closeSimulator();
            });
            
            // Handle window resize
            window.addEventListener('resize', function() {
                // Redraw OTDR canvas on resize
                if (APP_STATE.currentPage === 'simulators') {
                    const canvas = document.getElementById('otdrCanvas');
                    if (canvas) {
                        const ctx = canvas.getContext('2d');
                        canvas.width = canvas.offsetWidth;
                        canvas.height = canvas.offsetHeight;
                        if (APP_STATE.otdrData) {
                            generateOTDRTrace();
                        } else {
                            drawOTDRGrid(ctx, canvas);
                        }
                    }
                }
                
                // Auto-close sidebar on large screens
                if (window.innerWidth >= 1200) {
                    document.getElementById('sidebar').classList.remove('active');
                }
            });
            
            // Initialize dashboard
            showPage('dashboard');
            
            // Load initial data
            loadEquipmentData();
            
            // Set up equipment category tabs
            document.querySelectorAll('[data-tab]').forEach(tab => {
                if (['all', 'testing', 'splicing', 'termination'].includes(tab.dataset.tab)) {
                    tab.addEventListener('click', function() {
                        renderEquipmentGrid(this.dataset.tab);
                    });
                }
            });
        }

        // ==================== LOAD FUNCTIONS ====================
        function loadComponents() {
            const components = [
                {
                    name: 'Fiber Cable',
                    type: 'Single Mode',
                    description: '9/125Âµm fiber for long distance transmission',
                    loss: '0.2 dB/km @ 1550nm'
                },
                {
                    name: 'Connector',
                    type: 'LC/APC',
                    description: 'Angled Physical Contact for low back reflection',
                    loss: '<0.3 dB'
                },
                {
                    name: 'Splitter',
                    type: '1:8 PLC',
                    description: 'Planar Lightwave Circuit splitter',
                    loss: '10.5 dB'
                },
                {
                    name: 'Patch Panel',
                    type: '19" Rack',
                    description: '48-port fiber distribution panel',
                    insertion: '<0.5 dB'
                }
            ];
            
            const grid = document.querySelector('#tab-components .equipment-grid');
            if (!grid) return;
            
            grid.innerHTML = components.map(comp => `
                <div class="equipment-card">
                    <div class="equipment-header">
                        <h3>${comp.name}</h3>
                        <span class="badge badge-primary">${comp.type}</span>
                    </div>
                    <div class="equipment-body">
                        <p>${comp.description}</p>
                        <div class="equipment-specs">
                            <span class="spec-tag">Loss: ${comp.loss}</span>
                            ${comp.insertion ? `<span class="spec-tag">Insertion: ${comp.insertion}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadFundamentals() {
            // This would load fundamentals content
            console.log('Loading fundamentals...');
        }

        // ==================== START APPLICATION ====================
        document.addEventListener('DOMContentLoaded', initializeApp);

        // ==================== GLOBAL FUNCTIONS ====================
        window.showPage = showPage;
        window.showEquipmentDetail = showEquipmentDetail;
        window.closeModal = closeModal;
        window.closeSimulator = closeSimulator;
        window.startOTDR = startOTDR;
        window.analyzeTrace = analyzeTrace;
        window.resetOTDR = resetOTDR;
        window.openSimulator = openSimulator;
        window.startSplicing = startSplicing;
        window.alignFibers = alignFibers;
        window.launchEquipmentSimulator = launchEquipmentSimulator;
    </script>
</body>
</html>
