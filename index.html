<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiberPro Field Tech Platform</title>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ====== CSS Variables ====== */
        :root {
            --primary: #00d4ff;
            --primary-dark: #00a8cc;
            --secondary: #6366f1;
            --accent: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark-1: #0f172a;
            --dark-2: #1e293b;
            --dark-3: #334155;
            --dark-4: #475569;
            --light-1: #f8fafc;
            --light-2: #e2e8f0;
            --light-3: #cbd5e1;
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --sidebar-width: 280px;
            --header-height: 70px;
            --glass-bg: rgba(30, 41, 59, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        /* ====== Base Reset ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--dark-1) 0%, var(--dark-2) 100%);
            color: var(--light-2);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        /* ====== RTL Support ====== */
        body[dir="rtl"] {
            text-align: right;
        }

        body[dir="rtl"] .sidebar {
            right: 0;
            left: auto;
            transform: translateX(100%);
        }

        body[dir="rtl"] .sidebar.active {
            transform: translateX(0);
        }

        /* ====== Custom Scrollbar ====== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-2);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--dark-4);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* ====== Loading Animation ====== */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--primary); }
            50% { box-shadow: 0 0 20px var(--primary); }
        }

        /* ====== Glass Morphism ====== */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
        }

        /* ====== Top Navigation ====== */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            color: var(--primary);
            font-size: 2rem;
            animation: float 3s ease-in-out infinite;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-spacer {
            flex: 1;
        }

        /* ====== Language Switcher ====== */
        .language-switcher {
            position: relative;
        }

        .lang-btn {
            background: var(--dark-3);
            border: 1px solid var(--dark-4);
            color: var(--light-2);
            padding: 8px 20px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: var(--transition);
        }

        .lang-btn:hover {
            background: var(--dark-4);
            border-color: var(--primary);
        }

        .lang-btn i {
            font-size: 1.2rem;
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: var(--dark-2);
            border: 1px solid var(--dark-4);
            border-radius: var(--radius-sm);
            min-width: 200px;
            display: none;
            overflow: hidden;
            z-index: 1001;
        }

        .lang-dropdown.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .lang-option {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .lang-option:hover {
            background: var(--dark-3);
        }

        .lang-option.active {
            background: var(--dark-3);
            color: var(--primary);
        }

        .flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            overflow: hidden;
        }

        .flag img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ====== Main Layout ====== */
        .main-container {
            display: flex;
            min-height: 100vh;
            padding-top: var(--header-height);
        }

        .sidebar {
            width: var(--sidebar-width);
            background: var(--dark-2);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            height: calc(100vh - var(--header-height));
            position: sticky;
            top: var(--header-height);
            overflow-y: auto;
            transition: var(--transition);
        }

        .sidebar-header {
            padding: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .user-details h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .user-details p {
            font-size: 0.85rem;
            color: var(--light-3);
        }

        .nav-menu {
            padding: 1.5rem 0;
        }

        .nav-category {
            padding: 0 1.5rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--light-3);
            margin-bottom: 12px;
        }

        .nav-item {
            padding: 12px 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .nav-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .nav-item.active {
            background: rgba(0, 212, 255, 0.15);
            color: var(--primary);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--primary);
        }

        .nav-icon {
            width: 24px;
            text-align: center;
            font-size: 1.2rem;
        }

        .nav-text {
            flex: 1;
            font-weight: 500;
        }

        .nav-badge {
            background: var(--primary);
            color: var(--dark-1);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 24px;
            text-align: center;
        }

        /* ====== Main Content ====== */
        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .page {
            display: none;
            animation: slideIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--light-1), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: var(--light-3);
            font-size: 1.1rem;
        }

        /* ====== Dashboard ====== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--dark-2), var(--dark-3));
            border-radius: var(--radius-md);
            padding: 1.5rem;
            border: 1px solid var(--dark-4);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .stat-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .stat-info h3 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--light-1);
            line-height: 1;
        }

        .stat-info p {
            color: var(--light-3);
            font-size: 0.9rem;
        }

        /* ====== Equipment Grid ====== */
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .equipment-card {
            background: linear-gradient(135deg, var(--dark-2), var(--dark-3));
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 1px solid var(--dark-4);
            transition: var(--transition);
            position: relative;
        }

        .equipment-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .equipment-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .equipment-image {
            height: 220px;
            overflow: hidden;
            position: relative;
        }

        .equipment-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .equipment-card:hover .equipment-image img {
            transform: scale(1.05);
        }

        .equipment-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.8));
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
        }

        .equipment-type {
            background: var(--primary);
            color: var(--dark-1);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .equipment-content {
            padding: 1.5rem;
        }

        .equipment-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            color: var(--light-1);
        }

        .equipment-specs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.2rem;
        }

        .spec-tag {
            background: rgba(0, 212, 255, 0.1);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* ====== Installation Guides ====== */
        .installation-steps {
            display: grid;
            gap: 2rem;
        }

        .step-card {
            background: linear-gradient(135deg, var(--dark-2), var(--dark-3));
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 1px solid var(--dark-4);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: rgba(0, 212, 255, 0.05);
            border-bottom: 1px solid var(--dark-4);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--dark-1);
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--light-1);
        }

        .step-content {
            padding: 1.5rem;
        }

        .step-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .step-image {
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .step-image img {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .step-instructions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .instruction-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 1rem;
            background: rgba(0, 212, 255, 0.05);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
        }

        .instruction-icon {
            color: var(--primary);
            font-size: 1.2rem;
            margin-top: 2px;
        }

        .tools-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .tool-tag {
            background: rgba(139, 92, 246, 0.1);
            color: var(--accent);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ====== Interactive Simulators ====== */
        .simulator-container {
            background: linear-gradient(135deg, var(--dark-2), var(--dark-3));
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 1px solid var(--dark-4);
        }

        .simulator-header {
            padding: 1.5rem;
            background: rgba(0, 212, 255, 0.05);
            border-bottom: 1px solid var(--dark-4);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .simulator-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--light-1);
        }

        .simulator-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .simulator-tab {
            padding: 8px 20px;
            background: transparent;
            border: 1px solid var(--dark-4);
            color: var(--light-3);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: var(--transition);
        }

        .simulator-tab:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .simulator-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--dark-1);
        }

        .simulator-body {
            padding: 2rem;
        }

        /* OTDR Simulator */
        .otdr-interface {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
            height: 500px;
        }

        .otdr-controls {
            background: var(--dark-3);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .control-label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--light-3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-input {
            background: var(--dark-4);
            border: 1px solid var(--dark-4);
            color: var(--light-1);
            padding: 10px 16px;
            border-radius: var(--radius-sm);
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .control-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
        }

        .otdr-display {
            background: #1a1f2e;
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--dark-4);
        }

        .otdr-canvas {
            width: 100%;
            height: 100%;
        }

        .simulator-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-sm);
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--dark-1);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--dark-3);
            color: var(--light-2);
            border: 1px solid var(--dark-4);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }

        /* ====== Modal ====== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, var(--dark-2), var(--dark-3));
            border-radius: var(--radius-md);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--dark-4);
            position: relative;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--dark-4);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--light-1);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--light-3);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--primary);
        }

        /* ====== Mobile Responsive ====== */
        @media (max-width: 1024px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: var(--header-height);
                transform: translateX(-100%);
                z-index: 1001;
                box-shadow: var(--shadow-lg);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .mobile-toggle {
                display: block;
                background: none;
                border: none;
                color: var(--light-2);
                font-size: 1.5rem;
                cursor: pointer;
                margin-right: 1rem;
            }

            .equipment-grid {
                grid-template-columns: 1fr;
            }

            .step-grid {
                grid-template-columns: 1fr;
            }

            .otdr-interface {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        @media (max-width: 768px) {
            .top-nav {
                padding: 0 1rem;
            }

            .main-content {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .simulator-tabs {
                flex-wrap: wrap;
            }
        }

        /* ====== Animation Classes ====== */
        .animate-in {
            animation: slideIn 0.5s ease forwards;
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        .float {
            animation: float 3s ease-in-out infinite;
        }

        /* ====== Utility Classes ====== */
        .text-gradient {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .glass-effect {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online { background: var(--success); box-shadow: 0 0 10px var(--success); }
        .status-offline { background: var(--danger); }
        .status-warning { background: var(--warning); }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav glass-effect">
        <div class="mobile-toggle" id="mobileToggle">
            <i class="fas fa-bars"></i>
        </div>
        
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-fiber"></i>
            </div>
            <div class="logo-text">FiberPro</div>
        </div>

        <div class="nav-spacer"></div>

        <!-- Language Switcher -->
        <div class="language-switcher">
            <button class="lang-btn" id="langBtn">
                <i class="fas fa-globe"></i>
                <span id="currentLang">English</span>
                <i class="fas fa-chevron-down"></i>
            </button>
            <div class="lang-dropdown" id="langDropdown">
                <div class="lang-option active" data-lang="en">
                    <div class="flag">
                        <img src="https://flagcdn.com/w40/us.png" alt="English">
                    </div>
                    <span>English</span>
                </div>
                <div class="lang-option" data-lang="fr">
                    <div class="flag">
                        <img src="https://flagcdn.com/w40/fr.png" alt="Français">
                    </div>
                    <span>Français</span>
                </div>
                <div class="lang-option" data-lang="ar">
                    <div class="flag">
                        <img src="https://flagcdn.com/w40/sa.png" alt="العربية">
                    </div>
                    <span>العربية</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <h3>Field Technician</h3>
                        <p>Level 3 Certified</p>
                    </div>
                </div>
            </div>

            <nav class="nav-menu">
                <div class="nav-category">Main</div>
                <div class="nav-item active" data-page="dashboard">
                    <div class="nav-icon"><i class="fas fa-home"></i></div>
                    <div class="nav-text">Dashboard</div>
                </div>

                <div class="nav-category">Field Work</div>
                <div class="nav-item" data-page="installation">
                    <div class="nav-icon"><i class="fas fa-hard-hat"></i></div>
                    <div class="nav-text">Installation Guides</div>
                    <div class="nav-badge">8</div>
                </div>

                <div class="nav-item" data-page="equipment">
                    <div class="nav-icon"><i class="fas fa-tools"></i></div>
                    <div class="nav-text">Field Equipment</div>
                    <div class="nav-badge">12</div>
                </div>

                <div class="nav-category">Training</div>
                <div class="nav-item" data-page="simulators">
                    <div class="nav-icon"><i class="fas fa-desktop"></i></div>
                    <div class="nav-text">Simulators</div>
                    <div class="nav-badge">4</div>
                </div>

                <div class="nav-item" data-page="troubleshooting">
                    <div class="nav-icon"><i class="fas fa-bug"></i></div>
                    <div class="nav-text">Troubleshooting</div>
                </div>

                <div class="nav-category">Reference</div>
                <div class="nav-item" data-page="standards">
                    <div class="nav-icon"><i class="fas fa-book"></i></div>
                    <div class="nav-text">Standards</div>
                </div>

                <div class="nav-item" data-page="calculators">
                    <div class="nav-icon"><i class="fas fa-calculator"></i></div>
                    <div class="nav-text">Calculators</div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <section id="page-dashboard" class="page active">
                <div class="page-header">
                    <h1 class="page-title">Field Technician Dashboard</h1>
                    <p class="page-subtitle">Real-time monitoring and field operation tools</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <div class="stat-info">
                                <h3>8</h3>
                                <p>Active Jobs</p>
                            </div>
                        </div>
                        <div class="status-indicator status-online"></div>
                        <span>All systems operational</span>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>42</h3>
                                <p>Hours This Week</p>
                            </div>
                        </div>
                        <div class="status-indicator status-warning"></div>
                        <span>3 hours overtime</span>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3>98%</h3>
                                <p>Success Rate</p>
                            </div>
                        </div>
                        <div class="status-indicator status-online"></div>
                        <span>Above company average</span>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-toolbox"></i>
                            </div>
                            <div class="stat-info">
                                <h3>24</h3>
                                <p>Tools Available</p>
                            </div>
                        </div>
                        <div class="status-indicator status-online"></div>
                        <span>All equipment ready</span>
                    </div>
                </div>

                <div class="simulator-container" style="margin-top: 2rem;">
                    <div class="simulator-header">
                        <h3 class="simulator-title">Quick Actions</h3>
                    </div>
                    <div class="simulator-body">
                        <div class="simulator-actions">
                            <button class="btn btn-primary" onclick="showPage('installation')">
                                <i class="fas fa-play-circle"></i> Start Installation Guide
                            </button>
                            <button class="btn btn-secondary" onclick="showPage('equipment')">
                                <i class="fas fa-search"></i> Browse Equipment
                            </button>
                            <button class="btn btn-success" onclick="showPage('simulators')">
                                <i class="fas fa-desktop"></i> Launch Simulator
                            </button>
                            <button class="btn btn-danger" onclick="showPage('troubleshooting')">
                                <i class="fas fa-stethoscope"></i> Troubleshoot Issue
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Installation Guides Page -->
            <section id="page-installation" class="page">
                <div class="page-header">
                    <h1 class="page-title">Field Installation Guides</h1>
                    <p class="page-subtitle">Step-by-step procedures for field technicians</p>
                </div>

                <div class="installation-steps">
                    <!-- Step 1 -->
                    <div class="step-card animate-in">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <h3 class="step-title">Site Survey & Planning</h3>
                        </div>
                        <div class="step-content">
                            <div class="step-grid">
                                <div class="step-image">
                                    <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Site Survey">
                                </div>
                                <div class="step-instructions">
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-ruler-combined"></i></div>
                                        <div>
                                            <h4>Measure Route Distance</h4>
                                            <p>Use laser distance meter to measure exact cable run distance. Add 10% slack for terminations.</p>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-exclamation-triangle"></i></div>
                                        <div>
                                            <h4>Identify Hazards</h4>
                                            <p>Check for existing utilities, sharp edges, heat sources, and potential damage points.</p>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-drafting-compass"></i></div>
                                        <div>
                                            <h4>Plan Cable Pathway</h4>
                                            <p>Determine optimal route avoiding 90° bends. Maintain minimum bend radius of 20x cable diameter.</p>
                                        </div>
                                    </div>
                                    <div class="tools-list">
                                        <span class="tool-tag"><i class="fas fa-ruler"></i> Laser Distance Meter</span>
                                        <span class="tool-tag"><i class="fas fa-map"></i> Site Map</span>
                                        <span class="tool-tag"><i class="fas fa-camera"></i> Inspection Camera</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="step-card animate-in">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <h3 class="step-title">Cable Pulling & Installation</h3>
                        </div>
                        <div class="step-content">
                            <div class="step-grid">
                                <div class="step-image">
                                    <img src="https://images.unsplash.com/photo-1558494949-ef010cbdcc31?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Cable Pulling">
                                </div>
                                <div class="step-instructions">
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-compress-arrows-alt"></i></div>
                                        <div>
                                            <h4>Prepare Pulling Equipment</h4>
                                            <p>Setup cable reels, pulling grips, swivels, and lubricant. Maximum pulling tension: 270N (60 lbs).</p>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-tachometer-alt"></i></div>
                                        <div>
                                            <h4>Monitor Tension & Speed</h4>
                                            <p>Use tension meter to ensure <270N. Pull speed: 15-30 meters/minute. Never exceed 1.5m/s.</p>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-bell"></i></div>
                                        <div>
                                            <h4>Use Communication System</h4>
                                            <p>Maintain radio contact between pulling crew. Stop immediately if resistance increases.</p>
                                        </div>
                                    </div>
                                    <div class="tools-list">
                                        <span class="tool-tag"><i class="fas fa-dumbbell"></i> Tension Meter</span>
                                        <span class="tool-tag"><i class="fas fa-oil-can"></i> Cable Lubricant</span>
                                        <span class="tool-tag"><i class="fas fa-walking"></i> Pulling Grip</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="step-card animate-in">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <h3 class="step-title">Fusion Splicing Procedure</h3>
                        </div>
                        <div class="step-content">
                            <div class="step-grid">
                                <div class="step-image">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/OTDR_example.jpg/800px-OTDR_example.jpg" alt="Fusion Splicing">
                                </div>
                                <div class="step-instructions">
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-cut"></i></div>
                                        <div>
                                            <h4>Strip & Clean Fiber</h4>
                                            <p>Remove 40mm of buffer. Clean with 99% isopropyl alcohol. No residue allowed.</p>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-gem"></i></div>
                                        <div>
                                            <h4>Cleave Fiber Ends</h4>
                                            <p>Use precision cleaver for 8° angle cleave. Inspect with 200x microscope.</p>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="instruction-icon"><i class="fas fa-bolt"></i></div>
                                        <div>
                                            <h4>Perform Fusion Splice</h4>
                                            <p>Automatic alignment. Arc time: 2 seconds. Target loss: <0.02dB.</p>
                                        </div>
                                    </div>
                                    <div class="tools-list">
                                        <span class="tool-tag"><i class="fas fa-cut"></i> Precision Cleaver</span>
                                        <span class="tool-tag"><i class="fas fa-search"></i> Inspection Microscope</span>
                                        <span class="tool-tag"><i class="fas fa-bolt"></i> Fusion Splicer</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Equipment Page -->
            <section id="page-equipment" class="page">
                <div class="page-header">
                    <h1 class="page-title">Field Equipment Catalog</h1>
                    <p class="page-subtitle">Professional tools and equipment for field technicians</p>
                </div>

                <div class="equipment-grid">
                    <!-- Fusion Splicer -->
                    <div class="equipment-card animate-in">
                        <div class="equipment-image">
                            <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Fusion Splicer">
                            <div class="equipment-overlay">
                                <span class="equipment-type">Splicing Tool</span>
                            </div>
                        </div>
                        <div class="equipment-content">
                            <h3 class="equipment-title">Fujikura 70S+ Fusion Splicer</h3>
                            <p>Professional field splicer with PAS alignment system. 5-second splice time, <0.02dB typical loss.</p>
                            <div class="equipment-specs">
                                <span class="spec-tag">Arc Time: 2s</span>
                                <span class="spec-tag">Loss: <0.02dB</span>
                                <span class="spec-tag">Battery: 150 splices</span>
                                <span class="spec-tag">Weight: 3.5kg</span>
                            </div>
                            <div class="simulator-actions" style="margin-top: 1rem;">
                                <button class="btn btn-primary" onclick="openEquipmentModal('splicer')">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                                <button class="btn btn-secondary" onclick="showPage('simulators')">
                                    <i class="fas fa-play"></i> Simulate
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- OTDR -->
                    <div class="equipment-card animate-in">
                        <div class="equipment-image">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/OTDR_example.jpg/800px-OTDR_example.jpg" alt="OTDR">
                            <div class="equipment-overlay">
                                <span class="equipment-type">Testing Equipment</span>
                            </div>
                        </div>
                        <div class="equipment-content">
                            <h3 class="equipment-title">EXFO FTB-1 OTDR</h3>
                            <p>High-performance OTDR with 45dB dynamic range. Multi-wavelength testing and automatic analysis.</p>
                            <div class="equipment-specs">
                                <span class="spec-tag">Range: 250km</span>
                                <span class="spec-tag">Dynamic: 45dB</span>
                                <span class="spec-tag">Wavelengths: 3</span>
                                <span class="spec-tag">Dead Zone: 0.8m</span>
                            </div>
                            <div class="simulator-actions" style="margin-top: 1rem;">
                                <button class="btn btn-primary" onclick="openEquipmentModal('otdr')">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                                <button class="btn btn-secondary" onclick="showPage('simulators')">
                                    <i class="fas fa-play"></i> Simulate
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Power Meter -->
                    <div class="equipment-card animate-in">
                        <div class="equipment-image">
                            <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Power Meter">
                            <div class="equipment-overlay">
                                <span class="equipment-type">Measurement Tool</span>
                            </div>
                        </div>
                        <div class="equipment-content">
                            <h3 class="equipment-title">VIAVI SmartPocket Optical Power Meter</h3>
                            <p>Dual-port power meter with ±0.2dB accuracy. Auto-wavelength detection and PON power testing.</p>
                            <div class="equipment-specs">
                                <span class="spec-tag">Range: +3 to -70dBm</span>
                                <span class="spec-tag">Accuracy: ±0.2dB</span>
                                <span class="spec-tag">Wavelengths: 8</span>
                                <span class="spec-tag">Battery: 40h</span>
                            </div>
                            <div class="simulator-actions" style="margin-top: 1rem;">
                                <button class="btn btn-primary" onclick="openEquipmentModal('power-meter')">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                                <button class="btn btn-secondary" onclick="showPage('simulators')">
                                    <i class="fas fa-play"></i> Simulate
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Inspection Microscope -->
                    <div class="equipment-card animate-in">
                        <div class="equipment-image">
                            <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Microscope">
                            <div class="equipment-overlay">
                                <span class="equipment-type">Inspection Tool</span>
                            </div>
                        </div>
                        <div class="equipment-content">
                            <h3 class="equipment-title">FiberChek Sidewinder Microscope</h3>
                            <p>400x magnification with side-view and end-view capabilities. IEC 61300-3-35 compliant.</p>
                            <div class="equipment-specs">
                                <span class="spec-tag">Magnification: 400x</span>
                                <span class="spec-tag">View: Side/End</span>
                                <span class="spec-tag">Light: LED</span>
                                <span class="spec-tag">Resolution: 1µm</span>
                            </div>
                            <div class="simulator-actions" style="margin-top: 1rem;">
                                <button class="btn btn-primary" onclick="openEquipmentModal('microscope')">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                                <button class="btn btn-secondary" onclick="showPage('simulators')">
                                    <i class="fas fa-play"></i> Simulate
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Simulators Page -->
            <section id="page-simulators" class="page">
                <div class="page-header">
                    <h1 class="page-title">Field Training Simulators</h1>
                    <p class="page-subtitle">Interactive simulations for field technician training</p>
                </div>

                <div class="simulator-container">
                    <div class="simulator-header">
                        <h3 class="simulator-title">OTDR Trace Analysis Simulator</h3>
                        <div class="simulator-tabs">
                            <button class="simulator-tab active" data-sim="otdr">OTDR</button>
                            <button class="simulator-tab" data-sim="splicing">Splicing</button>
                            <button class="simulator-tab" data-sim="power">Power Meter</button>
                            <button class="simulator-tab" data-sim="inspection">Inspection</button>
                        </div>
                    </div>
                    <div class="simulator-body">
                        <div class="otdr-interface">
                            <div class="otdr-controls">
                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-wave-square"></i> Wavelength
                                    </label>
                                    <select class="control-input" id="wavelength">
                                        <option value="1310">1310nm (SM)</option>
                                        <option value="1550" selected>1550nm (SM)</option>
                                        <option value="1625">1625nm (SM)</option>
                                        <option value="850">850nm (MM)</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-expand-alt"></i> Pulse Width
                                    </label>
                                    <select class="control-input" id="pulseWidth">
                                        <option value="10">10ns (High Resolution)</option>
                                        <option value="100" selected>100ns (Standard)</option>
                                        <option value="1000">1000ns (Long Range)</option>
                                        <option value="10000">10000ns (Ultra Long)</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-ruler"></i> Range
                                    </label>
                                    <select class="control-input" id="range">
                                        <option value="10">10km</option>
                                        <option value="25" selected>25km</option>
                                        <option value="50">50km</option>
                                        <option value="100">100km</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">
                                        <i class="fas fa-hourglass-half"></i> Measurement Time
                                    </label>
                                    <select class="control-input" id="measureTime">
                                        <option value="30">30 seconds</option>
                                        <option value="60" selected>1 minute</option>
                                        <option value="180">3 minutes</option>
                                        <option value="300">5 minutes</option>
                                    </select>
                                </div>

                                <div class="simulator-actions">
                                    <button class="btn btn-primary" onclick="startOTDRMeasurement()">
                                        <i class="fas fa-play"></i> Start Measurement
                                    </button>
                                    <button class="btn btn-secondary" onclick="analyzeTrace()">
                                        <i class="fas fa-search"></i> Analyze
                                    </button>
                                    <button class="btn btn-danger" onclick="resetOTDR()">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                </div>
                            </div>

                            <div class="otdr-display">
                                <canvas id="otdrCanvas" class="otdr-canvas"></canvas>
                            </div>
                        </div>

                        <div id="analysisResults" style="margin-top: 2rem; padding: 1.5rem; background: var(--dark-3); border-radius: var(--radius-md); display: none;">
                            <h4 style="margin-bottom: 1rem; color: var(--primary);">
                                <i class="fas fa-chart-bar"></i> Analysis Results
                            </h4>
                            <div id="resultsContent">
                                <!-- Results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Equipment Modal -->
    <div class="modal" id="equipmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Equipment Details</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>

    <script>
        // ==================== GLOBAL STATE ====================
        const state = {
            currentPage: 'dashboard',
            currentLanguage: 'en',
            translations: {},
            otdrData: null,
            isMeasuring: false,
            measurementInterval: null
        };

        // ==================== TRANSLATION SYSTEM ====================
        class TranslationService {
            constructor() {
                this.dictionary = {
                    en: {
                        // Navigation
                        'nav_dashboard': 'Dashboard',
                        'nav_installation': 'Installation Guides',
                        'nav_equipment': 'Field Equipment',
                        'nav_simulators': 'Simulators',
                        'nav_troubleshooting': 'Troubleshooting',
                        'nav_standards': 'Standards',
                        'nav_calculators': 'Calculators',
                        
                        // Dashboard
                        'dashboard_title': 'Field Technician Dashboard',
                        'dashboard_subtitle': 'Real-time monitoring and field operation tools',
                        'stat_jobs': 'Active Jobs',
                        'stat_hours': 'Hours This Week',
                        'stat_success': 'Success Rate',
                        'stat_tools': 'Tools Available',
                        
                        // Equipment
                        'equipment_title': 'Field Equipment Catalog',
                        'equipment_subtitle': 'Professional tools and equipment for field technicians',
                        
                        // Installation
                        'installation_title': 'Field Installation Guides',
                        'installation_subtitle': 'Step-by-step procedures for field technicians',
                        
                        // Simulators
                        'simulators_title': 'Field Training Simulators',
                        'simulators_subtitle': 'Interactive simulations for field technician training',
                        
                        // Buttons
                        'btn_details': 'Details',
                        'btn_simulate': 'Simulate',
                        'btn_start': 'Start Measurement',
                        'btn_analyze': 'Analyze',
                        'btn_reset': 'Reset',
                        
                        // Messages
                        'msg_loading': 'Loading...',
                        'msg_success': 'Operation completed successfully',
                        'msg_error': 'An error occurred'
                    },
                    fr: {
                        // Navigation
                        'nav_dashboard': 'Tableau de bord',
                        'nav_installation': 'Guides d\'installation',
                        'nav_equipment': 'Équipement de terrain',
                        'nav_simulators': 'Simulateurs',
                        'nav_troubleshooting': 'Dépannage',
                        'nav_standards': 'Normes',
                        'nav_calculators': 'Calculatrices',
                        
                        // Dashboard
                        'dashboard_title': 'Tableau de bord Technicien',
                        'dashboard_subtitle': 'Surveillance en temps réel et outils de terrain',
                        'stat_jobs': 'Tâches actives',
                        'stat_hours': 'Heures cette semaine',
                        'stat_success': 'Taux de réussite',
                        'stat_tools': 'Outils disponibles',
                        
                        // Equipment
                        'equipment_title': 'Catalogue d\'équipement',
                        'equipment_subtitle': 'Outils professionnels pour techniciens de terrain',
                        
                        // Installation
                        'installation_title': 'Guides d\'installation',
                        'installation_subtitle': 'Procédures étape par étape',
                        
                        // Simulators
                        'simulators_title': 'Simulateurs de formation',
                        'simulators_subtitle': 'Simulations interactives pour la formation',
                        
                        // Buttons
                        'btn_details': 'Détails',
                        'btn_simulate': 'Simuler',
                        'btn_start': 'Démarrer mesure',
                        'btn_analyze': 'Analyser',
                        'btn_reset': 'Réinitialiser',
                        
                        // Messages
                        'msg_loading': 'Chargement...',
                        'msg_success': 'Opération réussie',
                        'msg_error': 'Une erreur est survenue'
                    },
                    ar: {
                        // Navigation
                        'nav_dashboard': 'لوحة التحكم',
                        'nav_installation': 'أدلة التثبيت',
                        'nav_equipment': 'معدات الميدان',
                        'nav_simulators': 'المحاكاة',
                        'nav_troubleshooting': 'استكشاف الأخطاء',
                        'nav_standards': 'المعايير',
                        'nav_calculators': 'الحاسبات',
                        
                        // Dashboard
                        'dashboard_title': 'لوحة تحكم الفني',
                        'dashboard_subtitle': 'مراقبة في الوقت الحقيقي وأدوات العمل الميداني',
                        'stat_jobs': 'مهام نشطة',
                        'stat_hours': 'ساعات هذا الأسبوع',
                        'stat_success': 'معدل النجاح',
                        'stat_tools': 'الأدوات المتاحة',
                        
                        // Equipment
                        'equipment_title': 'كتالوج معدات الميدان',
                        'equipment_subtitle': 'أدوات احترافية لفنيي الميدان',
                        
                        // Installation
                        'installation_title': 'أدلة التثبيت الميداني',
                        'installation_subtitle': 'إجراءات خطوة بخطوة',
                        
                        // Simulators
                        'simulators_title': 'محاكيات التدريب',
                        'simulators_subtitle': 'محاكاة تفاعلية لتدريب الفنيين',
                        
                        // Buttons
                        'btn_details': 'التفاصيل',
                        'btn_simulate': 'محاكاة',
                        'btn_start': 'بدء القياس',
                        'btn_analyze': 'تحليل',
                        'btn_reset': 'إعادة تعيين',
                        
                        // Messages
                        'msg_loading': 'جاري التحميل...',
                        'msg_success': 'تمت العملية بنجاح',
                        'msg_error': 'حدث خطأ'
                    }
                };
                
                // Initialize with English
                this.currentLang = 'en';
                this.applyTranslations('en');
            }

            translate(key) {
                return this.dictionary[this.currentLang]?.[key] || key;
            }

            applyTranslations(lang) {
                this.currentLang = lang;
                
                // Update all elements with data-translate attribute
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    const translation = this.translate(key);
                    
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translation;
                    } else {
                        element.textContent = translation;
                    }
                });
                
                // Update language button
                const langNames = {
                    'en': 'English',
                    'fr': 'Français',
                    'ar': 'العربية'
                };
                document.getElementById('currentLang').textContent = langNames[lang];
                
                // Update RTL for Arabic
                document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
                
                // Update flag in dropdown
                document.querySelectorAll('.lang-option').forEach(option => {
                    option.classList.toggle('active', option.dataset.lang === lang);
                });
                
                // Store preference
                localStorage.setItem('preferredLanguage', lang);
            }

            async translateText(text, targetLang) {
                // Try API first
                try {
                    const response = await fetch('https://api.mymemory.translated.net/get', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    // For demo purposes, we'll use our dictionary
                    // In production, you would use the API response
                    return this.dictionary[targetLang]?.[text] || text;
                } catch (error) {
                    console.warn('Translation API failed, using dictionary:', error);
                    return this.dictionary[targetLang]?.[text] || text;
                }
            }
        }

        // ==================== PAGE MANAGEMENT ====================
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) {
                targetPage.classList.add('active');
                state.currentPage = pageId;
                
                // Update active nav item
                const navItem = document.querySelector(`.nav-item[data-page="${pageId}"]`);
                if (navItem) {
                    navItem.classList.add('active');
                }
                
                // Initialize page-specific functionality
                initializePage(pageId);
                
                // Animate in elements
                setTimeout(() => {
                    targetPage.querySelectorAll('.animate-in').forEach((el, i) => {
                        setTimeout(() => {
                            el.style.opacity = '1';
                            el.style.transform = 'translateY(0)';
                        }, i * 100);
                    });
                }, 100);
            }
            
            // Close sidebar on mobile
            if (window.innerWidth < 1024) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        function initializePage(pageId) {
            switch(pageId) {
                case 'simulators':
                    initOTDRSimulator();
                    break;
                case 'equipment':
                    initEquipmentAnimations();
                    break;
                case 'installation':
                    initInstallationSteps();
                    break;
            }
        }

        // ==================== OTDR SIMULATOR ====================
        function initOTDRSimulator() {
            const canvas = document.getElementById('otdrCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Draw initial grid
            drawOTDRGrid(ctx, canvas);
            
            // Tab switching
            document.querySelectorAll('.simulator-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.simulator-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Hide all simulator content
                    document.querySelectorAll('.simulator-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    
                    // Show selected simulator
                    const simId = this.dataset.sim;
                    document.getElementById(`sim-${simId}`).style.display = 'block';
                });
            });
        }

        function drawOTDRGrid(ctx, canvas) {
            const width = canvas.width;
            const height = canvas.height;
            
            // Clear canvas
            ctx.fillStyle = '#1a1f2e';
            ctx.fillRect(0, 0, width, height);
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            
            // Vertical lines (distance)
            for (let x = 0; x < width; x += width / 10) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            // Horizontal lines (power)
            for (let y = 0; y < height; y += height / 8) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Axis labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            ctx.font = '12px Poppins';
            
            // Distance axis
            for (let i = 0; i <= 10; i++) {
                const x = (i / 10) * width;
                const distance = (i * (parseInt(document.getElementById('range').value) / 10)).toFixed(1);
                ctx.fillText(`${distance}km`, x - 15, height - 10);
            }
            
            // Power axis
            ctx.fillText('Power (dBm)', 10, 20);
        }

        function startOTDRMeasurement() {
            if (state.isMeasuring) return;
            
            state.isMeasuring = true;
            const canvas = document.getElementById('otdrCanvas');
            const ctx = canvas.getContext('2d');
            
            // Get settings
            const range = parseInt(document.getElementById('range').value);
            const pulseWidth = parseInt(document.getElementById('pulseWidth').value);
            const wavelength = parseInt(document.getElementById('wavelength').value);
            
            // Simulate measurement progress
            let progress = 0;
            const interval = 50; // ms
            const totalTime = parseInt(document.getElementById('measureTime').value) * 1000;
            
            state.measurementInterval = setInterval(() => {
                progress += interval;
                const percentage = (progress / totalTime) * 100;
                
                // Update progress
                drawOTDRProgress(ctx, canvas, percentage);
                
                if (progress >= totalTime) {
                    clearInterval(state.measurementInterval);
                    state.isMeasuring = false;
                    generateOTDRTrace(ctx, canvas, range, pulseWidth, wavelength);
                }
            }, interval);
        }

        function drawOTDRProgress(ctx, canvas, percentage) {
            const width = canvas.width;
            const height = canvas.height;
            
            // Draw background
            drawOTDRGrid(ctx, canvas);
            
            // Draw progress bar
            ctx.fillStyle = 'rgba(0, 212, 255, 0.3)';
            ctx.fillRect(0, 0, (percentage / 100) * width, 4);
            
            // Draw progress text
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.font = '14px Poppins';
            ctx.fillText(`Measuring: ${Math.round(percentage)}%`, width / 2 - 40, 30);
        }

        function generateOTDRTrace(ctx, canvas, range, pulseWidth, wavelength) {
            const width = canvas.width;
            const height = canvas.height;
            
            // Clear and redraw grid
            drawOTDRGrid(ctx, canvas);
            
            // Generate trace data
            const tracePoints = [];
            const pointCount = 500;
            const noiseLevel = 0.5;
            
            // Base attenuation
            let lastY = height * 0.2;
            
            for (let i = 0; i < pointCount; i++) {
                const x = (i / pointCount) * width;
                
                // Exponential decay for fiber attenuation
                let y = lastY * Math.exp(-i / (pointCount * 0.8));
                
                // Add events at specific distances
                const distance = (i / pointCount) * range;
                
                // Connector at 5km
                if (Math.abs(distance - 5) < 0.1) {
                    y *= 0.7; // 30% reflection
                }
                
                // Splice at 12km
                if (Math.abs(distance - 12) < 0.1) {
                    y *= 0.9; // 10% loss
                }
                
                // Break at 18km
                if (Math.abs(distance - 18) < 0.1) {
                    y = height * 0.8; // Large reflection
                }
                
                // Add noise
                y += (Math.random() - 0.5) * noiseLevel * 10;
                y = Math.max(0, Math.min(height, y));
                
                tracePoints.push({x, y});
                lastY = y;
            }
            
            // Draw trace
            ctx.beginPath();
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.moveTo(tracePoints[0].x, tracePoints[0].y);
            
            for (let i = 1; i < tracePoints.length; i++) {
                ctx.lineTo(tracePoints[i].x, tracePoints[i].y);
            }
            ctx.stroke();
            
            // Draw event markers
            drawEventMarkers(ctx, canvas, range);
            
            // Store trace data
            state.otdrData = tracePoints;
        }

        function drawEventMarkers(ctx, canvas, range) {
            const width = canvas.width;
            const height = canvas.height;
            
            // Connector at 5km
            const x1 = (5 / range) * width;
            ctx.fillStyle = '#f59e0b';
            ctx.beginPath();
            ctx.arc(x1, height * 0.4, 8, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('Connector', x1 - 25, height * 0.4 - 15);
            
            // Splice at 12km
            const x2 = (12 / range) * width;
            ctx.fillStyle = '#10b981';
            ctx.beginPath();
            ctx.arc(x2, height * 0.5, 8, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('Splice', x2 - 20, height * 0.5 - 15);
            
            // Break at 18km
            const x3 = (18 / range) * width;
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(x3, height * 0.6, 8, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('Break', x3 - 20, height * 0.6 - 15);
        }

        function analyzeTrace() {
            const resultsDiv = document.getElementById('analysisResults');
            const contentDiv = document.getElementById('resultsContent');
            
            if (!state.otdrData) {
                contentDiv.innerHTML = `
                    <div style="color: #f59e0b;">
                        <i class="fas fa-exclamation-triangle"></i> No measurement data available. Please run a measurement first.
                    </div>
                `;
                resultsDiv.style.display = 'block';
                return;
            }
            
            // Generate analysis
            const analysis = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div style="background: rgba(0, 212, 255, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #00d4ff; font-weight: 600; margin-bottom: 0.5rem;">
                            <i class="fas fa-ruler"></i> Fiber Length
                        </div>
                        <div style="font-size: 1.5rem; font-weight: 700;">25.3 km</div>
                    </div>
                    
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #10b981; font-weight: 600; margin-bottom: 0.5rem;">
                            <i class="fas fa-wave-square"></i> Attenuation
                        </div>
                        <div style="font-size: 1.5rem; font-weight: 700;">0.21 dB/km</div>
                    </div>
                    
                    <div style="background: rgba(245, 158, 11, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #f59e0b; font-weight: 600; margin-bottom: 0.5rem;">
                            <i class="fas fa-exclamation-circle"></i> Events Found
                        </div>
                        <div style="font-size: 1.5rem; font-weight: 700;">3</div>
                    </div>
                    
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #ef4444; font-weight: 600; margin-bottom: 0.5rem;">
                            <i class="fas fa-times-circle"></i> Total Loss
                        </div>
                        <div style="font-size: 1.5rem; font-weight: 700;">15.7 dB</div>
                    </div>
                </div>
                
                <div style="margin-top: 1.5rem;">
                    <h5 style="color: #00d4ff; margin-bottom: 1rem;">
                        <i class="fas fa-list"></i> Event Details
                    </h5>
                    <div style="background: rgba(30, 41, 59, 0.5); border-radius: 8px; overflow: hidden;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: rgba(0, 212, 255, 0.1);">
                                    <th style="padding: 0.75rem; text-align: left;">Distance</th>
                                    <th style="padding: 0.75rem; text-align: left;">Type</th>
                                    <th style="padding: 0.75rem; text-align: left;">Loss</th>
                                    <th style="padding: 0.75rem; text-align: left;">Reflection</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                    <td style="padding: 0.75rem;">5.02 km</td>
                                    <td style="padding: 0.75rem;">Connector</td>
                                    <td style="padding: 0.75rem; color: #f59e0b;">0.3 dB</td>
                                    <td style="padding: 0.75rem;">-45 dB</td>
                                </tr>
                                <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                    <td style="padding: 0.75rem;">12.15 km</td>
                                    <td style="padding: 0.75rem;">Fusion Splice</td>
                                    <td style="padding: 0.75rem; color: #10b981;">0.1 dB</td>
                                    <td style="padding: 0.75rem;">None</td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem;">18.47 km</td>
                                    <td style="padding: 0.75rem;">Fiber Break</td>
                                    <td style="padding: 0.75rem; color: #ef4444;">15.0 dB</td>
                                    <td style="padding: 0.75rem;">-14 dB</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border-left: 4px solid #ef4444;">
                    <div style="color: #ef4444; font-weight: 600; margin-bottom: 0.5rem;">
                        <i class="fas fa-exclamation-triangle"></i> Recommendation
                    </div>
                    <p>Fiber break detected at 18.47 km. Dispatch repair team immediately. Estimated repair time: 4 hours.</p>
                </div>
            `;
            
            contentDiv.innerHTML = analysis;
            resultsDiv.style.display = 'block';
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function resetOTDR() {
            if (state.measurementInterval) {
                clearInterval(state.measurementInterval);
                state.isMeasuring = false;
            }
            
            const canvas = document.getElementById('otdrCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            drawOTDRGrid(ctx, canvas);
            
            // Hide results
            document.getElementById('analysisResults').style.display = 'none';
            
            state.otdrData = null;
        }

        // ==================== MODAL SYSTEM ====================
        function openEquipmentModal(equipmentType) {
            const modal = document.getElementById('equipmentModal');
            const modalBody = document.getElementById('modalBody');
            
            const equipmentData = {
                'splicer': {
                    title: 'Fujikura 70S+ Fusion Splicer',
                    content: `
                        <div style="padding: 2rem;">
                            <div style="display: grid; grid-template-columns: 300px 1fr; gap: 2rem; margin-bottom: 2rem;">
                                <div>
                                    <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                                         alt="Fusion Splicer" style="width: 100%; border-radius: 8px;">
                                </div>
                                <div>
                                    <h4 style="color: #00d4ff; margin-bottom: 1rem;">Field Specifications</h4>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Splice Time</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">5 seconds</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Typical Loss</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">&lt;0.02 dB</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Battery Life</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">150 splices</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Weight</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">3.5 kg</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h4 style="color: #00d4ff; margin-bottom: 1rem;">Field Procedure</h4>
                            <div style="background: rgba(30, 41, 59, 0.5); border-radius: 8px; padding: 1.5rem;">
                                <ol style="margin-left: 1.5rem; display: flex; flex-direction: column; gap: 0.8rem;">
                                    <li>Strip 40mm of buffer coating using stripping tool</li>
                                    <li>Clean fiber with 99% isopropyl alcohol wipes</li>
                                    <li>Cleave fiber with precision cleaver (8° angle)</li>
                                    <li>Place fibers in splicer holders and close cover</li>
                                    <li>Press START for automatic alignment and splicing</li>
                                    <li>Apply heat shrink protector over splice point</li>
                                    <li>Test splice loss with power meter</li>
                                </ol>
                            </div>
                            
                            <h4 style="color: #00d4ff; margin-top: 1.5rem; margin-bottom: 1rem;">Common Field Issues</h4>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                <div style="background: rgba(245, 158, 11, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #f59e0b;">
                                    <div style="color: #f59e0b; font-weight: 600; margin-bottom: 0.5rem;">High Loss</div>
                                    <div style="font-size: 0.9rem;">Check cleave angle and cleanliness</div>
                                </div>
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #ef4444;">
                                    <div style="color: #ef4444; font-weight: 600; margin-bottom: 0.5rem;">No Arc</div>
                                    <div style="font-size: 0.9rem;">Clean electrodes, check battery</div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'otdr': {
                    title: 'EXFO FTB-1 OTDR',
                    content: `
                        <div style="padding: 2rem;">
                            <div style="display: grid; grid-template-columns: 300px 1fr; gap: 2rem; margin-bottom: 2rem;">
                                <div>
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/OTDR_example.jpg/600px-OTDR_example.jpg" 
                                         alt="OTDR" style="width: 100%; border-radius: 8px;">
                                </div>
                                <div>
                                    <h4 style="color: #00d4ff; margin-bottom: 1rem;">Technical Specifications</h4>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Dynamic Range</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">45 dB</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Dead Zone</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">0.8 m</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Wavelengths</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">1310/1550/1625nm</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.9rem; color: #cbd5e1;">Range</div>
                                            <div style="font-size: 1.2rem; font-weight: 600;">250 km</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h4 style="color: #00d4ff; margin-bottom: 1rem;">Field Measurement Procedure</h4>
                            <div style="background: rgba(30, 41, 59, 0.5); border-radius: 8px; padding: 1.5rem;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                                    <div>
                                        <div style="color: #00d4ff; font-weight: 600; margin-bottom: 0.5rem;">Step 1: Setup</div>
                                        <ul style="margin-left: 1.5rem; font-size: 0.9rem;">
                                            <li>Clean connector with alcohol wipes</li>
                                            <li>Connect launch cable to OTDR</li>
                                            <li>Set wavelength (1550nm for long distance)</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <div style="color: #00d4ff; font-weight: 600; margin-bottom: 0.5rem;">Step 2: Configure</div>
                                        <ul style="margin-left: 1.5rem; font-size: 0.9rem;">
                                            <li>Set range to 1.5x fiber length</li>
                                            <li>Set pulse width (wider for longer range)</li>
                                            <li>Set measurement time (30s-3min)</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <div style="color: #00d4ff; font-weight: 600; margin-bottom: 0.5rem;">Step 3: Measure</div>
                                        <ul style="margin-left: 1.5rem; font-size: 0.9rem;">
                                            <li>Start measurement</li>
                                            <li>Monitor progress on screen</li>
                                            <li>Save trace for analysis</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <div style="color: #00d4ff; font-weight: 600; margin-bottom: 0.5rem;">Step 4: Analyze</div>
                                        <ul style="margin-left: 1.5rem; font-size: 0.9rem;">
                                            <li>Identify events on trace</li>
                                            <li>Measure distance to faults</li>
                                            <li>Calculate loss per event</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            };
            
            if (equipmentData[equipmentType]) {
                document.querySelector('.modal-title').textContent = equipmentData[equipmentType].title;
                modalBody.innerHTML = equipmentData[equipmentType].content;
                modal.classList.add('active');
            }
        }

        function closeModal() {
            document.getElementById('equipmentModal').classList.remove('active');
        }

        // ==================== INITIALIZATION ====================
        function init() {
            // Initialize translation service
            window.translator = new TranslationService();
            
            // Set initial language
            const savedLang = localStorage.getItem('preferredLanguage') || 'en';
            translator.applyTranslations(savedLang);
            
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.dataset.page;
                    showPage(pageId);
                });
            });
            
            // Language switcher
            document.getElementById('langBtn').addEventListener('click', function() {
                document.getElementById('langDropdown').classList.toggle('active');
            });
            
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.dataset.lang;
                    translator.applyTranslations(lang);
                    document.getElementById('langDropdown').classList.remove('active');
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.language-switcher')) {
                    document.getElementById('langDropdown').classList.remove('active');
                }
            });
            
            // Mobile menu toggle
            document.getElementById('mobileToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });
            
            // Close modal on ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            // Close modal on outside click
            document.getElementById('equipmentModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            // Initialize animations
            initAnimations();
            
            // Show dashboard by default
            showPage('dashboard');
        }

        function initAnimations() {
            // Animate equipment cards on hover
            document.querySelectorAll('.equipment-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
            
            // Animate stat cards
            document.querySelectorAll('.stat-card').forEach((card, i) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, i * 100);
            });
        }

        function initEquipmentAnimations() {
            // Equipment cards entrance animation
            const cards = document.querySelectorAll('.equipment-card');
            cards.forEach((card, i) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, i * 150);
            });
        }

        function initInstallationSteps() {
            // Step cards entrance animation
            const steps = document.querySelectorAll('.step-card');
            steps.forEach((step, i) => {
                setTimeout(() => {
                    step.style.opacity = '1';
                    step.style.transform = 'translateY(0)';
                }, i * 200);
            });
        }

        // ==================== EVENT LISTENERS ====================
        document.addEventListener('DOMContentLoaded', init);
        
        // Handle window resize
        window.addEventListener('resize', function() {
            // Redraw OTDR canvas on resize
            if (state.currentPage === 'simulators') {
                const canvas = document.getElementById('otdrCanvas');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                    drawOTDRGrid(ctx, canvas);
                    
                    // Redraw trace if exists
                    if (state.otdrData) {
                        generateOTDRTrace(ctx, canvas, 
                            parseInt(document.getElementById('range').value),
                            parseInt(document.getElementById('pulseWidth').value),
                            parseInt(document.getElementById('wavelength').value)
                        );
                    }
                }
            }
            
            // Auto-close sidebar on large screens
            if (window.innerWidth >= 1024) {
                document.getElementById('sidebar').classList.remove('active');
            }
        });

        // ==================== GLOBAL FUNCTIONS ====================
        window.showPage = showPage;
        window.openEquipmentModal = openEquipmentModal;
        window.closeModal = closeModal;
        window.startOTDRMeasurement = startOTDRMeasurement;
        window.analyzeTrace = analyzeTrace;
        window.resetOTDR = resetOTDR;
    </script>
</body>
</html>
